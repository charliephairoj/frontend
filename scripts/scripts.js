"use strict";function search(e,t,o,r,n){for(var i=0;e.length>i;i++)if(e[i].hasOwnProperty(t)&&e[i][t]==o)return r(e[i],i),e[i];return angular.isFunction(n)&&n(),!1}function merge(e,t){e&&t&&angular.forEach(t,function(t){search(e,"id",t.id,function(t,o){e[o].status=!0})})}angular.module("employeeApp.services",["ngResource"]),angular.module("employeeApp.directives",[]),angular.module("employeeApp.filters",[]),angular.module("employeeApp",["ngResource","ui","employeeApp.directives","employeeApp.filters","employeeApp.services","ngGrid"]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"views/main.html"}).when("/contact/customer/add",{templateUrl:"views/contact/customer/add.html",controller:"ContactCustomerAddCtrl"}).when("/contact/customer/:id",{templateUrl:"views/contact/customer/details.html",controller:"ContactCustomerDetailsCtrl"}).when("/contact/customer",{templateUrl:"views/contact/customer/view.html",controller:"ContactCustomerViewCtrl"}).when("/contact/supplier/add",{templateUrl:"views/contact/supplier/add.html",controller:"ContactSupplierAddCtrl"}).when("/contact/supplier",{templateUrl:"views/contact/supplier/view.html",controller:"ContactSupplierViewCtrl"}).when("/contact/supplier/:id",{templateUrl:"views/contact/supplier/details.html",controller:"ContactSupplierDetailsCtrl"}).when("/contact",{templateUrl:"views/contact.html"}).when("/product/upholstery/add",{templateUrl:"views/product/upholstery/add.html",controller:"ProductUpholsteryAddCtrl"}).when("/product/upholstery",{templateUrl:"views/product/upholstery/view.html",controller:"ProductUpholsteryViewCtrl"}).when("/product/upholstery/:id",{templateUrl:"views/product/upholstery/details.html",controller:"ProductUpholsteryDetailsCtrl"}).when("/product",{templateUrl:"views/product.html"}).when("/product/model/add",{templateUrl:"views/product/model/add.html",controller:"ProductModelAddCtrl"}).when("/product/model",{templateUrl:"views/product/model/view.html",controller:"ProductModelViewCtrl"}).when("/product/model/:id",{templateUrl:"views/product/model/details.html",controller:"ProductModelDetailsCtrl"}).when("/order/acknowledgement/create",{templateUrl:"views/order/acknowledgement/create.html",controller:"OrderAcknowledgementCreateCtrl"}).when("/order",{templateUrl:"views/order.html"}).when("/order/acknowledgement",{templateUrl:"views/order/acknowledgement/view.html",controller:"OrderAcknowledgementViewCtrl"}).when("/order/shipping/create",{templateUrl:"views/order/shipping/create.html",controller:"OrderShippingCreateCtrl"}).when("/order/shipping",{templateUrl:"views/order/shipping/view.html",controller:"OrderShippingViewCtrl"}).when("/order/shipping/deliveries/today",{templateUrl:"views/order/shipping/today.html",controller:"OrderShippingTodayCtrl"}).when("/order/shipping/deliveries/week",{templateUrl:"views/order/shipping/week.html",controller:"OrderShippingWeekCtrl"}).when("/administrator/group/add",{templateUrl:"views/administrator/group/add.html",controller:"AdministratorGroupAddCtrl"}).when("/administrator/group",{templateUrl:"views/administrator/group/view.html",controller:"AdministratorGroupViewCtrl"}).when("/administrator/group/:id",{templateUrl:"views/administrator/group/details.html",controller:"AdministratorGroupDetailsCtrl"}).when("/administrator/user/add",{templateUrl:"views/administrator/user/add.html",controller:"AdministratorUserAddCtrl"}).when("/administrator/user/:id",{templateUrl:"views/administrator/user/details.html",controller:"AdministratorUserDetailsCtrl"}).when("/administrator/user",{templateUrl:"views/administrator/user/view.html",controller:"AdministratorUserViewCtrl"}).when("/administrator",{templateUrl:"views/administrator.html"}).when("/supply",{templateUrl:"views/supply/view.html",controller:"SupplyViewCtrl"}).when("/supply/fabric",{templateUrl:"views/supply/fabric/view.html",controller:"SupplyFabricViewCtrl"}).when("/supply/fabric/add",{templateUrl:"views/supply/fabric/add.html",controller:"SupplyFabricAddCtrl"}).when("/supply/fabric/:id",{templateUrl:"views/supply/fabric/details.html",controller:"SupplyFabricDetailsCtrl"}).when("/supply/foam/add",{templateUrl:"views/supply/foam/add.html",controller:"SupplyFoamAddCtrl"}).when("/supply/foam/:id",{templateUrl:"views/supply/foam/details.html",controller:"SupplyFoamDetailsCtrl"}).when("/supply/foam",{templateUrl:"views/supply/foam/view.html",controller:"SupplyFoamViewCtrl"}).when("/accounting",{templateUrl:"views/accounting.html"}).when("/accounting/transaction",{templateUrl:"views/accounting/transaction/view.html",controller:"AccountingTransactionViewCtrl"}).when("/accounting/transaction/add",{templateUrl:"views/accounting/transaction/add.html",controller:"AccountingTransactionAddCtrl"}).when("/accounting/transaction/:id",{templateUrl:"views/accounting/transaction/details.html",controller:"AccountingTransactionDetailsCtrl"}).when("/order/acknowledgement/:id",{templateUrl:"views/order/acknowledgement/details.html",controller:"OrderAcknowledgementDetailsCtrl"}).when("/order/shipping/delivery",{templateUrl:"views/order/shipping/delivery.html",controller:"OrderShippingDeliveryCtrl"}).when("/order/shipping/:id",{templateUrl:"views/order/shipping/details.html",controller:"OrderShippingDetailsCtrl"}).when("/order/acknowledgement/item/:id",{templateUrl:"views/order/acknowledgement/item/details.html",controller:"OrderAcknowledgementItemDetailsCtrl"}).when("/supply/prop",{templateUrl:"views/supply/prop/view.html",controller:"SupplyPropViewCtrl"}).when("/supply/prop/add",{templateUrl:"views/supply/prop/add.html",controller:"SupplyPropAddCtrl"}).when("/supply/prop/:id",{templateUrl:"views/supply/prop/details.html",controller:"SupplyPropDetailsCtrl"}).when("/supply/lumber/view",{templateUrl:"views/supply/lumber/view.html",controller:"SupplyLumberViewCtrl"}).when("/product/inventory",{templateUrl:"views/product/inventory.html",controller:"ProductInventoryCtrl"}).when("/product/table",{templateUrl:"views/product/table/view.html",controller:"ProductTableViewCtrl"}).when("/product/rug",{templateUrl:"views/product/rug.html",controller:"ProductRugCtrl"}).when("/product/rug/view",{templateUrl:"views/product/rug/view.html",controller:"ProductRugViewCtrl"}).when("/product/rug/add",{templateUrl:"views/product/rug/add.html",controller:"ProductRugAddCtrl"}).when("/product/table/add",{templateUrl:"views/product/table/add.html",controller:"ProductTableAddCtrl"}).when("/product/table/:id",{templateUrl:"views/product/table/details.html",controller:"ProductTableDetailsCtrl"}).when("/project",{templateUrl:"views/project/view.html",controller:"ProjectViewCtrl"}).when("/project/:id",{templateUrl:"views/project/details.html",controller:"ProjectDetailsCtrl"}).when("/hr",{templateUrl:"views/hr.html"}).when("/hr/employee",{templateUrl:"views/hr/employee/view.html",controller:"HrEmployeeViewCtrl"}).when("/project/room/:id",{templateUrl:"views/project/room/details.html",controller:"ProjectRoomDetailsCtrl"}).when("/order/purchase_order",{templateUrl:"views/order/purchase_order/view.html",controller:"OrderPurchaseOrderViewCtrl"}).when("/order/purchase_order/create",{templateUrl:"views/order/purchase_order/create.html",controller:"OrderPurchaseOrderCreateCtrl"}).when("/order/purchase_order/:id",{templateUrl:"views/order/purchase_order/details.html",controller:"OrderPurchaseOrderDetailsCtrl"}).when("/supply/:id",{templateUrl:"views/supply/details.html",controller:"SupplyDetailsCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("employeeApp").config(["$httpProvider",function(e){e.defaults.headers.post={"Cache-Control":"no-cache",expires:"-1",pragma:"no-cache","Content-Type":"application/json"},e.defaults.headers.get={"Cache-Control":"no-cache",expires:"-1",pragma:"no-cache"},e.defaults.transformResponse.push(function(e){return"object"==typeof e&&e.hasOwnProperty("meta")&&e.hasOwnProperty("objects")?(console.log(e),e.objects):e})}]),angular.module("employeeApp").run(["$rootScope","CurrentUser","scanner","$http",function(e,t,o){e.currentUser=t,Array.prototype.indexOfById=function(e){e="object"==typeof e?e.hasOwnProperty("id")?e.id:null:e;for(var t=this,o=0;t.length>o;o++)if(t[o].id==e)return o;return-1},e.safeApply=function(e){this.$$phase?this.$eval(e):this.$apply(e)},e.units={"in":"Inch",cm:"Centimeter",m:"Meter",mm:"Millimeter",yd:"Yard",kg:"Kilogram",pack:"Pack",container:"Container",pc:"Piece"},o.enable()}]),angular.module("employeeApp").controller("ContactCustomerAddCtrl",["$scope","Customer","$location","Notification","Geocoder",function(e,t,o,r,n){e.customer=new t,e.save=function(){r.display("Saving Customer...",!1),e.customer.$save(function(){r.display("Customer Saved"),o.path("/contact/customer")})},e.getPosition=function(){if(e.customer.address.address1&&e.customer.address.city&&e.customer.address.territory&&e.customer.address.country&&e.customer.address.zipcode){var t=n.geocode(e.customer.address);t.then(function(t){e.marker?e.marker.setPosition(t[0].geometry.location):(e.marker=e.map.createMarker(t[0].geometry.location),e.marker.onchange=function(){e.customer.address.lat=e.marker.lat,e.customer.address.lng=e.marker.lng}),e.map.setPosition(t[0].geometry.location),e.customer.address.lat=e.marker.lat,e.customer.address.lng=e.marker.lng},function(e){console.log(e)})}}}]),angular.module("employeeApp").controller("ContactCustomerDetailsCtrl",["$scope","Customer","$routeParams","$location","Notification","Geocoder",function(e,t,o,r,n,i){function a(t){e.marker?e.marker.setPosition(t[0].geometry.location):(e.marker=e.map.createMarker(t[0].geometry.location),e.marker.onchange=function(){e.customer.address[0].lat=e.marker.lat,e.customer.address[0].lng=e.marker.lng}),e.map.setPosition(t[0].geometry.location),e.customer.address[0].lat=e.marker.lat,e.customer.address[0].lng=e.marker.lng}e.customer=t.get({id:o.id},function(){try{e.marker=e.map.createMarker({lat:e.customer.address.lat,lng:e.customer.adress.lng})}catch(t){try{var o=i.geocode(e.customer.addresses[0]);o.then(function(e){a(e)})}catch(t){}}}),e.update=function(){n.display("Updating...",!1),e.customer.$update(function(){n.display("Customer Save")},function(){n.display("Unable to Update Customer")})},e.updatePosition=function(){var t=i.geocode(e.customer.address);t.then(function(e){a(e)})},e.remove=function(){e.customer.$delete(function(){r.path("/contact/customer")})}}]),angular.module("employeeApp").controller("ContactCustomerViewCtrl",["$scope","Customer","Notification","$location","Geocoder","$filter",function(e,t,o,r,n){var i=!1;o.display("Loading Customers...",!1),e.customers=t.query(function(){o.hide()}),e.$watch("query",function(o){o&&t.query({q:o},function(t){for(var o=0;t.length>o;o++)-1==e.customers.indexOfById(t[o])&&e.customers.push(t[o])})}),e.loadNext=function(){i||(i=!0,t.query({offset:e.customers.length,limit:50},function(t){i=!1;for(var o=0;t.length>o;o++)e.customers.push(t[o])}))},e.customer=new t,e.address={},e.getLocation=function(){if(e.customer.address.address1&&e.customer.address.city&&e.customer.address.territory&&e.customer.address.country&&e.customer.address.zipcode){var t=n.geocode(e.customer.address);t.then(function(t){e.marker?e.marker.setPosition(t[0].geometry.location):(e.marker=e.map.createMarker(t[0].geometry.location),e.marker.onchange=function(){e.customer.address.lat=e.marker.lat,e.customer.address.lng=e.marker.lng}),e.map.setPosition(t[0].geometry.location),e.customer.address.lat=e.marker.lat,e.customer.address.lng=e.marker.lng},function(e){console.log(e)})}},e.save=function(){o.display("Saving customer..."),e.customer.$save(function(){e.addCustomer=!1,e.customers.push(angular.copy(e.customer)),e.customer=new t},function(){o.display("Unable to save customer",!1)})}}]),angular.module("employeeApp").controller("ContactSupplierAddCtrl",["$scope","Supplier","$location","Notification",function(e,t,o,r){e.supplier=new t,e.addContact=function(){r.display("Contact Added to Supplier"),e.supplier.contacts=e.supplier.contacts||[],e.supplier.contacts.push(angular.copy(e.contact)),e.contact={},e.showAddContact=!1},e.getLocation=function(){e.map.getPosition(e.supplier.address,function(t){angular.extend(e.supplier.address,t),e.map.setPosition({lat:t.lat,lng:t.lng,updateMarker:!0})})},e.save=function(){e.form.$valid&&(r.display("Saving Supplier...",!1),e.supplier.$save(function(){r.display("Supplier Saved"),o.path("/contact/supplier")}))}}]),angular.module("employeeApp").controller("ContactSupplierViewCtrl",["$scope","Supplier","Notification","$filter",function(e,t,o){o.display("Loading suppliers...",!1),e.suppliers=t.query(function(){o.hide()}),e.$watch("query",function(o){o&&t.query({q:o},function(t){for(var o=0;t.length>o;o++)-1==e.suppliers.indexOfById(t[o])&&e.suppliers.push(t[o])})}),e.loadNext=function(){t.query({offset:e.suppliers.length,limit:50},function(t){for(var o=0;t.length>o;o++)e.suppliers.push(t[o])})}}]),angular.module("employeeApp").controller("ContactSupplierDetailsCtrl",["$scope","Supplier","$routeParams","$location","SupplierContact","Notification",function(e,t,o,r,n,i){e.supplier=t.get({id:o.id}),e.addContact=function(){e.supplier.contacts=e.supplier.contacts||[],e.supplier.contacts.push(angular.copy(e.contact)),e.contact={},e.showAddContact=!1,e.supplier.$save()},e.deleteContact=function(t){var o=n.get({id:e.supplier.contacts[t].id},function(){e.supplier.contacts.splice(t,1),o.$delete(),e.supplier.$save(),e.$apply()})},e.update=function(){i.display("Updating Supplier...",!1),e.supplier.$update(function(){i.display("Supplier Updated")})},e.remove=function(){e.supplier.$remove(function(){r.path("/contact/supplier")})}}]),angular.module("employeeApp.services").factory("ecResource",["$storage","$rootScope","$http","$q","$parse","$resource",function(e,t,o,r,n,i){function a(t,o,r){function a(e,t){var r={};return t=angular.extend({},o,t),angular.forEach(t,function(t,o){angular.isFunction(t)&&(t=t()),r[o]=t.charAt&&"@"==t.charAt(0)?f(e,t.substr(1)):t}),r}function s(e,t){for(var o=0;e.length>o;o++)if(e[o].hasOwnProperty("id")&&e[o].id==t)return o;return-1}function l(e){angular.extend(this,e||{}),this.$$poll=!1,this.$$last_checked=!1,this.$$timeout,this.$$date=!0}var c,p,u={get:{method:"GET"},save:{method:"POST"},update:{method:"PUT"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},d=e(t.split(/\//g)[0]),m=!1,f=function(e,t){return n(t)(e)};return r=angular.extend({},u,r),c=new i(t,o,r),l.disableDate=function(){this.$$date=!1},l.prototype.disableDate=l.disableDate,l.poll=function(){return this.$$poll=!0,m=!0,this},l.prototype.poll=l.poll,l.stopPolling=function(){return m=!1,this},l.prototype.poll=l.poll,angular.forEach(r,function(e,t){var o="POST"==e.method||"PUT"==e.method||"PATCH"==e.method;l[t]=function(r,n,i,a){var u,f={},h=angular.noop,g=null;switch(arguments.length){case 4:g=a,h=i;case 3:case 2:if(!angular.isFunction(n)){f=r,u=n,h=i;break}if(angular.isFunction(r)){h=r,g=n;break}h=n,g=i;case 1:angular.isFunction(r)?h=r:o?u=r:f=r;break;case 0:break;default:throw"Expected between 0-4 arguments [params, data, success, error], got "+arguments.length+" arguments."}if(p=e.isArray?angular.isArray(p)?p||[]:[]:angular.isObject(p)&&!p.hasOwnProperty("length")?p||{}:{},p.$$marker="poop",d[t]){var y=o?d[t](u)||p:d[t](f)||p;e.isArray?angular.forEach(y,function(e,t){var t=s(p,e.id);t>-1&&angular.extend(p[t],new l(e)),t>-1?angular.extend(p[t],new l(e)):p.push(new l(e))}):p=new l(y),o&&angular.extend(p,this)}return c[t](f,u,function(r){"DELETE"==e.method?d.remove(f):d.save(r),("DELETE"==e.method||o)&&angular.extend(this,r),e.isArray?angular.forEach(r,function(e){var t=s(p,e.id);t>-1?angular.extend(p[t],e):p.push(new l(e))}):angular.extend(p,new l(r)),this.$$last_checked=new Date,d.saveLastModified(this.$$last_checked),m&&"GET"==e.method&&(this.$$timeout=setTimeout(l[t],5e3)),console.log(p.length),h(r)}.bind(this),function(e){console.log(e)}),p},l.prototype["$"+t]=function(e,r,n){var i,s=a(this),c=angular.noop;switch(arguments.length){case 3:s=e,c=r,i=n;break;case 2:case 1:angular.isFunction(e)?(c=e,i=r):(s=e,c=r||angular.noop);case 0:break;default:throw"Expected between 1-3 arguments [params, success, error], got "+arguments.length+" arguments."}var p=o?this:void 0;l[t].call(this,s,p,c,i)}}),l}return a}]),angular.module("employeeApp.services").factory("$storage",[function(){function e(e){function t(e){this.key=e,"localStorage"in window&&null!==window.localStorage&&(this.storage=window.localStorage,this.getKeys())}return t.prototype.isSupported=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}},t.prototype.createKeysArray=function(){return this.keys=[],this.saveKeys(),this.keys},t.prototype.saveKeys=function(){"object"==typeof this.keys?this.storage.setItem(this.key,JSON.stringify(this.keys)):this.createKeysArray()},t.prototype.createKey=function(){return e="storage-temp"+Date.now()},t.prototype.saveKey=function(e){var t=this.key+e;return this.keys=this.keys||this.createKeysArray(),-1===this.keys.indexOf(t)&&(this.keys.push(t),this.saveKeys()),t},t.prototype.getKeys=function(){return this.keys=JSON.parse(this.storage.getItem(this.key)),"object"!=typeof this.keys&&this.createKeysArray(),this.keys},t.prototype.deleteKey=function(e){this.keys=this.keys||this.getKeys();var t=this.keys.indexOf(e);return-1!=t?(this.keys.splice(t),this.saveKeys(),!0):!1},t.prototype.clearKeys=function(){return this.keys=[],this.storage.setItem(this.key,JSON.stringify(this.keys)),0===JSON.parse(this.storage.getItem(this.key)).length?!0:!1},t.prototype.getKey=function(e){return this.key+e},t.prototype.query=function(){var e,t=[];this.keys=this.getKeys();for(e in this.keys)t.push(JSON.parse(this.storage.getItem(this.keys[e])));return t},t.prototype.save=function(e){function t(e){if(e.hasOwnProperty("id")){var t=this.saveKey(e.id);return this.storage.setItem(t,JSON.stringify(e)),!0}return!1}var o=t.bind(this);if(!e)return!1;if(!angular.isArray(e))return o(e)?e:!1;for(var r=0;e.length>r;r++)if(!o(e[r]))return!1},t.prototype.get=function(e){if(e.hasOwnProperty("id")){var t;return t=this.getKey(e.id),t?JSON.parse(this.storage.getItem(t)):"itemKey"}return e},t.prototype.remove=function(e){var t;return e.hasOwnProperty("id")?(t=this.getKey(e.id),this.storage.removeItem(t),this.deleteKey(t),!0):!1},t.prototype.clear=function(){var e;for(e in this.keys)this.storage.removeItem(this.keys[e]);this.clearKeys()},t.prototype.saveLastModified=function(e){this.storage.setItem(this.key+"-last_modified",e.toISOString())},t.prototype.getLastModified=function(){var e=this.storage.getItem(this.key+"-last_modified");return e?new Date(e):!1},new t(e)}return e}]),angular.module("employeeApp.services").factory("Customer",["$resource",function(e){return e("/api/v1/customer/:id",{id:"@id"},{update:{method:"PUT"},create:{method:"POST"}})}]),angular.module("employeeApp.services").factory("Supplier",["$resource",function(e){return e("/api/v1/supplier/:id",{id:"@id"},{update:{method:"PUT"},create:{method:"POST"}})}]),angular.module("employeeApp.services").factory("CurrentUser",["$http",function(e){function t(){console.log("ok");var t=e.get("/api/v1/current_user");t.then(function(e){console.log(e),angular.copy(e.data||{},this),console.log(this),console.log(this.hasModule("orders"))}.bind(this))}return t.prototype.hasPermission=function(e){return this.modules?-1!==this.permissions.indexOf(e)?!0:!1:!1},t.prototype.hasModule=function(e){return this.modules?-1!==this.modules.indexOf(e)?!0:!1:!1},new t}]),angular.module("employeeApp.services").factory("Notification",["$timeout","$rootScope",function(e,t){function o(e){var t=$(window).width(),o=$(e).width();0==$(e).css("left")?$(e).css("left",t-o):$(e).css("margin-left",-(o/2))}function r(){this.notification=angular.element("#notification"),this.promise=null}return r.prototype.display=function(r,n){t.safeApply(function(){this.notification.html(r),o(this.notification),this.notification.addClass("active")}.bind(this)),this.promise&&e.cancel(this.promise),0!=n&&(this.promise=e(function(){this.hide()}.bind(this),1e3))},r.prototype.hide=function(){this.notification.removeClass("active")},new r}]),angular.module("employeeApp.services").factory("SupplierContact",["eaResource",function(e){return e("supplier_contact/:id",{id:"@id"})}]),angular.module("employeeApp.filters").filter("dateRange",[function(){function e(e,t,o,r){t.getTime()<=e.getTime()&&e.getTime()<=o.getTime()&&r()}function t(e){switch(typeof e){case"object":return e;case"string":return new Date(e);case"number":return new Date(e);default:return new Date(e)}}return function(o,r,n,i){var a=[],s=t(n),l=t(i);return angular.forEach(o,function(t){if(t.hasOwnProperty(r))if("object"==typeof t[r])e(t[r],s,l,function(){a.push(t)});else if("string"==typeof t[r]){var o=new Date(t[r]);e(o,s,l,function(){a.push(t)})}else if("number"==typeof t[r]){var o=new Date(t[r]);e(o,s,l,function(){a.push(t)})}}),a}}]),angular.module("employeeApp.filters").filter("dateFilter",[function(){function e(e,t,o){switch(o){case"equals":if(e.getMonth()==t.getMonth()&&e.getYear()==t.getYear()&&e.getDate()==t.getDate())return!0;break;case"greater":if(e.getTime()>=t.getTime())return!0;break;case"less":if(e.getTime()<=t.getTime())return!0;break;default:if(e.getMonth(e)==t.getMonth()&&e.getYear()==t.getYear()&&e.getDate()==t.getDate())return!0}return!1}return function(t,o,r,n){var i=[];return angular.forEach(t,function(t){if(t.hasOwnProperty(o))if("object"==typeof t[o])e(t[o],r,n)&&i.push(t);else if("string"==typeof t[o]){var a=new Date(t[o]);e(a,r,n,function(e){i.push(e)})}}),i}}]),angular.module("employeeApp.filters").filter("beautify",[function(){return function(e){var t,o,r,n=[],i=e.split(/\s+/);return angular.forEach(i,function(e){o=e.charAt(0).toUpperCase(),r=e.slice(1),r=o+r,n.push(r)}),t=n.join(" ")}}]),angular.module("employeeApp.filters").filter("exclude",[function(){return function(e,t,o){if(!(e instanceof Array))return[];var r=[];for(var n in e)e[n][t]!=o&&r.push(e[n]);return r}}]),angular.module("employeeApp.filters").filter("telephone",[function(){return function(e){var t=e.replace(/ /g,"").replace(/\-/g,"");return t}}]),angular.module("employeeApp").controller("ProductUpholsteryAddCtrl",["$scope","Model","Configuration","Upholstery","Notification","$location",function(e,t,o,r,n,i){e.modelList=t.query({limit:0}),e.configurationList=o.query({limit:0}),e.upholstery=new r,e.modelText="Choose a Model",e.configurationText="Choose a Configuration",e.widthText="Enter a Width in millimeters",e.depthText="Enter a Depth in millimeters",e.bpText="Enter the number of Back Pillows",e.apText="Enter the number of Accent Pillows",e.lpText="Enter the number of Lumbar Pillows",e.cpText="Enter the number of Corner Pillows",e.upload=function(){n.display("Uploading Image...",!1);var t=new FormData;t.append("image",e.images[0]),e.addLength=null,e.addRemark=null,jQuery.ajax("upholstery/image",{type:"POST",data:t,processData:!1,contentType:!1,success:function(t){n.display("Image Uploaded"),e.upholstery.image=e.upholstery.image||{},angular.copy(t,e.upholstery.image),e.$apply()}})},e.save=function(){n.display("Saving Upholstery Product..."),e.upholstery.$create(function(){n.display("Upholstery Product Saved"),i.path("/product/upholstery")})}}]),angular.module("employeeApp").controller("ProductUpholsteryViewCtrl",["$scope","Upholstery","Notification","$filter","$location",function(e,t,o){var r=!1;o.display("Loading Upholstery...",!1),e.resources=t.query({limit:20},function(){o.hide()}),e.$watch("query",function(o){o&&t.query({q:o,limit:5},function(t){for(var o=0;t.length>o;o++)-1==e.resources.indexOfById(t[o])&&e.resources.push(t[o])})}),e.loadNext=function(){r||(o.display("Loading more upholstery...",!1),t.query({offset:e.resources.length,limit:10},function(t){o.hide();for(var r=0;t.length>r;r++)e.resources.push(t[r])}))}}]),angular.module("employeeApp").controller("ProductUpholsteryDetailsCtrl",["$scope","Upholstery","$routeParams","Notification","$location",function(e,t,o,r,n){e.uphol=t.get({id:o.id}),e.upload=function(){r.display("Uploading Image...",!1);var t=new FormData;t.append("image",e.images[0]),jQuery.ajax("upholstery/image",{type:"POST",data:t,cache:!1,processData:!1,contentType:!1,success:function(t){r.display("Image Updated"),e.uphol.image={},angular.copy(t,e.uphol.image),e.uphol.$save(),e.imagePreviews=null,e.images=null,e.$apply()}})},e.update=function(){r.display("Saving Upholsterty...",!1),e.uphol.$update(function(){r.display("Upholstery Saved")})},e.remove=function(){r.display("Deleteing Upholstery Product"),e.uphol.$delete(function(){r.display("Upholstery Product Deleted"),n.path("/product/upholstery")})},e.$on("$destroy",function(){e.update()})}]),angular.module("employeeApp.services").factory("Upholstery",["$resource",function(e){return e("/api/v1/upholstery/:id",{id:"@id"},{update:{method:"PUT"},create:{method:"POST"}})}]),angular.module("employeeApp.services").factory("Model",["$resource",function(e){return e("/api/v1/model/:id",{id:"@id"},{update:{method:"PUT"},create:{method:"POST"}})}]),angular.module("employeeApp.services").factory("Configuration",["$resource",function(e){return e("/api/v1/configuration/:id",{id:"@id"},{update:{method:"PUT"},create:{method:"POST"}})}]),angular.module("employeeApp").controller("ProductModelAddCtrl",["$scope","Model","Notification","$location",function(e,t,o,r){e.model=new t,e.nameText="Enter a Name for this Model",e.modelText="Enter a Model Number for this Model",e.collectionText="Enter this Model's Collection",e.save=function(){o.display("Saving Model...",!1),e.model.$create(function(){r.path("/product/model"),o.display("Model Saved")})},e.uploadImage=function(){o.display("Uploading Image...",!1);var t=new FormData;t.append("image",e.images[0]),e.addLength=null,e.addRemark=null,jQuery.ajax("model/image",{type:"POST",data:t,processData:!1,contentType:!1,success:function(t){o.display("Image Uploaded"),e.model.image=e.model.image||{},angular.copy(t,e.model.image),e.$apply()}})}}]),angular.module("employeeApp").controller("ProductModelViewCtrl",["$scope","Model","Notification",function(e,t,o){var r=!1;e.modelList=t.query(function(){}),e.$watch("query",function(o){o&&t.query({q:o,limit:10},function(t){for(var o=0;t.length>o;o++)-1==e.modelList.indexOfById(t[o])&&e.modelList.push(t[o])})}),e.loadNext=function(){r||(o.display("Loading more models...",!1),t.query({limit:50,offset:e.modelList.length},function(t){for(var o=0;t.length>o;o++)e.modelList.push(t[o])}))}}]),angular.module("employeeApp").controller("ProductModelDetailsCtrl",["$scope","Model","$routeParams","$location","Notification","$http",function(e,t,o,r,n){e.model=t.get({id:o.id}),e.upload=function(){n.display("Uploading Model Image...",!1);var t=new FormData;t.append("image",e.images[0]),e.addLength=null,e.addRemark=null,jQuery.ajax("fabric/"+e.model.id+"/image",{type:"POST",data:t,processData:!1,contentType:!1,success:function(t){n.display("Model Image Updated"),e.model.image=e.model.image||{},angular.copy(t,e.model.image),e.model.$save(),e.imagePreviews=null,e.images=null,e.$apply(),console.log(e)}})},e.remove=function(){n.display("Deleting Model..."),e.model.$delete(function(){n.display("Model Deleted"),r.path("/product/model")})},e.update=function(){n.display("Saving Model...",!1),e.model.$update(function(){n.display("Model Updated")})},e.$on("$destroy",function(){e.update()})}]),angular.module("employeeApp.services").factory("Acknowledgement",["$resource","$http",function(e){return e("/api/v1/acknowledgement/:id",{id:"@id"},{update:{method:"PUT"},create:{method:"POST"}})}]),angular.module("employeeApp").controller("OrderAcknowledgementCreateCtrl",["$scope","Acknowledgement","Customer","$filter","Notification",function(e,t,o,r,n){e.showFabric=!1,e.uploading=!1,e.customImageScale=100,e.ack=new t;var i=window.localStorage;i.getItem("acknowledgement-create")&&angular.extend(e.ack,JSON.parse(i.getItem("acknowledgement-create"))),e.ack.items=e.ack.items||[],e.employee={id:e.currentUser.id},e.tempSave=function(){i.setItem("acknowledgement-create",JSON.stringify(e.ack))},e.addCustomer=function(t){e.ack.customer=t,e.showCustomers=!1,e.tempSave()},e.addItem=function(t){e.ack.items.push(t),e.tempSave()},e.removeItem=function(t){e.ack.items.splice(t,1),e.tempSave()},e.create=function(){e.ack.employee=e.currentUser,e.tempSave();try{e.isValidated()&&(n.display("Creating Acknowledgement...",!1),e.ack.$create(function(t){n.display("Acknowledgement created"),window.open(t.pdf.acknowledgement),window.open(t.pdf.production),angular.extend(e.ack,JSON.parse(i.getItem("acknowledgement-create")))},function(e){console.log(e),n.display("There an error in creating the Acknowledgement",!1)}))}catch(t){throw Error(t)}},e.reset=function(){e.ack=new t,e.ack.items=[],i.removeItem("acknowledgement-create")},e.isValidated=function(){if(!e.ack.customer)throw new TypeError("Customer is not an object");if(!e.ack.customer.hasOwnProperty("id"))throw new ReferenceError("Missin customer ID");if(!e.ack.items)throw new TypeError("Products is not an array");if(0>=e.ack.items.length)throw new RangeError("No products added to the order");for(var t=0;e.ack.items.length>t;t++){if(!e.ack.items[t].hasOwnProperty("quantity")||!e.ack.items[t].quantity)throw new RangeError("Expecting a quantity of at least 1 for "+e.ack.items[t].description);e.ack.items[t].hasOwnProperty("has_price")&&!e.ack.items[t].has_price}if(void 0===e.ack.vat||null===e.ack.vat)throw new TypeError("Vat is not a number");if(!e.ack.delivery_date)throw new TypeError("Delivery Date is not a valid Date type");if(!e.ack.po_id)throw new TypeError("PO# is not defined");return!0}}]),angular.module("employeeApp").controller("OrderAcknowledgementViewCtrl",["$scope","Acknowledgement","Notification","$location","$filter",function(e,t,o){var r=!0;o.display("Loading Acknowledgements...",!1),e.acknowledgements=t.query({limit:20},function(){o.hide(),r=!1}),e.$watch("query",function(o){o&&t.query({q:o,limit:5},function(t){for(var o=0;t.length>o;o++)-1==e.acknowledgements.indexOfById(t[o].id)&&e.acknowledgements.push(t[o])})}),e.loadNext=function(){r||(r=!0,o.display("Loading more acknowledgements",!1),t.query({limit:50,offset:e.acknowledgements.length},function(t){r=!1,o.hide();for(var n=0;t.length>n;n++)e.acknowledgements.push(t[n])}))}}]),angular.module("employeeApp.services").factory("Fabric",["$resource",function(e){return e("/api/v1/fabric/:id/:action",{id:"@id"},{update:{method:"PUT"},create:{method:"POST"},add:{method:"POST",params:{action:"add"}},subtract:{method:"POST",params:{action:"subtract"}}})}]),angular.module("employeeApp.directives").directive("fadeLoad",[function(){return{restrict:"A",replace:!1,link:function(e,t){t.css("opacity",0),t.bind("load",function(){t.fadeTo(1e3,1)})}}}]),angular.module("employeeApp").directive("fadeIn",[function(){return{restrict:"A",replace:!1,link:function(e,t){t.addClass("fadeIn")}}}]),angular.module("employeeApp").directive("ecBlur",[function(){return{restrict:"A",replace:!1,link:function(e,t,o){t.bind("blur",function(){e.$eval(o.ecBlur)})}}}]),angular.module("employeeApp").directive("dragOn",[function(){return{restrict:"A",replace:!1,link:function(e,t,o){t.attr("draggable",!0),t.bind("dragstart",function(t){t.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(e.$eval(o.dragOn)))})}}}]),angular.module("employeeApp").directive("dropOn",[function(){function e(e,t){var o,r=t.split(/\.\w*$/).shift(),n=t.split(/\./).pop();return o=e.$eval(r),o[n]=o[n]||{},o=o[n]}function t(e){return JSON.parse(e.originalEvent.dataTransfer.getData("text/plain"))}function o(e){e.stopPropagation(),e.preventDefault(),e.originalEvent.dataTransfer.effectAllowed="copy"}return{restrict:"A",replace:!1,link:function(r,n,i){n.bind("drop",function(a){o(a),n.removeClass("drag"),r.$apply(function(){var o=e(r,i.dropOn);angular.copy(t(a),o)})}).bind("dragover",function(e){o(e),n.addClass("drag")}).bind("dragleave",function(e){o(e),n.removeClass("drag")})}}}]),angular.module("employeeApp").directive("imageDropTarget",["$parse",function(){return{restrict:"EA",replace:!1,link:function(e,t,o){var r=new FileReader;
r.onload=function(t){console.log(t);var o={url:t.target.result};e.imagePreviews=e.imagePreviews||[],e.$apply(function(){e.imagePreviews.push(o)})},e.clearImages=function(){e.images?e.images.length=0:e.images=[]},t.bind("dragenter",function(e){e.preventDefault(),t.addClass("active")}),t.bind("dragleave",function(e){e.preventDefault(),t.removeClass("active")}),t.bind("dragover",function(e){e.preventDefault(),t.addClass("active")}),t.bind("drop",function(n){n.preventDefault(),n.stopPropagation(),t.removeClass("active");for(var i=n.originalEvent,a=i.dataTransfer.files,s=0;a.length>s;s++)("image/png"==a[s].type||"image/jpeg"==a[s].type)&&(e.images=e.images||[],e.images.push(a[s]),r.readAsDataURL(a[s]));e.$eval(o.imageDropTarget)})}}}]),angular.module("employeeApp").directive("beautify",["$filter","$parse",function(e,t){return{restrict:"A",link:function(o,r,n){r.bind("blur",function(){var i=e("beautify")(r.context.value);r.context.value=i,t(n.ngModel).assign(o,i)})}}}]),angular.module("employeeApp.directives").directive("telephone",["$filter","$parse",function(e,t){return{restrict:"A",link:function(o,r,n){r.bind("blur",function(){var i=e("telephone")(r.context.value);r.context.value=i,t(n.ngModel).assign(o,i)})}}}]),angular.module("employeeApp.directives").directive("map",["mapMarker",function(e){var t={center:new google.maps.LatLng(13.776239,100.527884),zoom:10,mapTypeId:google.maps.MapTypeId.HYBRID};return{restrict:"A",replace:!1,link:function(o,r){console.log(r),o.map={Marker:e,LatLng:google.maps.LatLng},o.map.map=new google.maps.Map(r.get(0),t),o.$on("shown",function(){google.maps.event.trigger(o.map.map,"resize")}),o.map.refresh=function(){google.maps.event.triggger(this.map)},o.map.createMarker=function(e){if(e instanceof google.maps.LatLng)var t=e;else if(e.hasOwnProperty("lat")&&e.hasOwnProperty("lng"))var t=new google.maps.LatLng(e.lat,e.lng);else var t=null;return new o.map.Marker({map:this.map,position:t})},o.map.setPosition=function(e){if(e instanceof google.maps.LatLng)var t=e;else var t=new google.maps.LatLng(e.lat,e.lng);this.map.panTo(t),this.map.setZoom(14)}}}}]),angular.module("employeeApp").directive("clickUrl",[function(){return{restrict:"A",link:function(e,t,o){t.bind("click",function(){console.log(e.category),e.category="fabric",$location.path(o.clickUrl),e.$apply()})}}}]),angular.module("employeeApp.directives").directive("modal",[function(){function e(){return angular.element('<div id="backdrop"></div>')}var t;return{restrict:"A",scope:!1,link:function(o,r,n){function i(o,r){r.removeClass("hide"),t=e(),$(document.body).append(t),t.on("click",function(){a(o,r,t)}),t.fadeTo(500,.7),r.fadeTo(500,1,function(){o.$broadcast("shown")})}function a(e,t,o,r){t.fadeOut(400,function(){t.addClass("hide"),e.$broadcast("hidden")}),o&&o.fadeOut(500,function(){o.remove(),(r||angular.noop)();try{(e.modal._onhide||angular.noop)()}catch(t){console.warn(t)}n.ngModel&&e.$apply(function(){e[n.ngModel]=!1})})}r.addClass("modal hide"),o.$on("$destroy",function(){t&&t.remove()}),n.ngModel&&o.$watch(n.ngModel,function(e){console.log(e),e?i(o,r):a(o,r,t)}),o.modal={_onhide:[]},o.modal.show=function(){i(o,r)},o.modal.hide=function(e){a(o,r,t,e)},Object.defineProperties(o.modal,{onhide:{set:function(e){this._onhide=e}}})}}}]),angular.module("employeeApp").controller("OrderShippingCreateCtrl",["$scope","Acknowledgement","$filter","Notification","Shipping","$location","scanner",function(e,t,o,r,n,i,a){var s=!0;e.acknowledgements=t.query({limit:20},function(){s=!1}),e.shipping=new n,a.onscan=function(o){var n=RegExp(/^A\-(s+)?/);n.test(o)&&(r.display("Retrieving Acknowledgement# "+o.split("-")[1],!1),t.get({id:o.split("-")[1]},function(t){r.hide();var o=t;e.shipping.acknowledgement={id:o.id},e.shipping.customer=o.customer,e.shipping.products=o.products,e.shipping.delivery_date=new Date(o.delivery_date)},function(){Notifcation.display("Unable to locate Acknowledgement#"+o.split("-")[1])}))},e.addAcknowledgement=function(t){e.shipping.acknowledgement={id:t.id},e.shipping.customer=t.customer,e.shipping.items=t.items,e.shipping.delivery_date=new Date(t.delivery_date),e.showAck=!1},e.$watch("query",function(o){o&&t.query({limit:5,q:o},function(t){for(var o=0;t.length>o;o++)-1==e.acknowledgements.indexOfById(t[o].id)&&e.acknowledgements.push(t[o])})}),e.loadNext=function(){s||(s=!0,t.query({offset:e.acknowledgements.length,limit:20},function(t){for(var o=0;t.length>o;o++)e.acknowledgements.push(t[o]);s=!1}))},e.create=function(){e.isValidated()?(r.display("Creating Acknowledgement...",!1),e.shipping.$save(function(e){r.display("Shipping manifest created"),window.open(e.pdf.url),i.path("/order/shipping")},function(){r.display("There was an error in creating the shipping manifest",!1)})):r.display("The Order is Not Complete")},e.removeProduct=function(t){e.shipping.items.splice(t,1)},e.isValidated=function(){return e.shipping.acknowledgement?e.shipping.delivery_date?!0:!1:!1},e.$on("$destroy",function(){a.onscan=null})}]),angular.module("employeeApp").controller("OrderShippingViewCtrl",["$scope","Shipping","$filter","Notification",function(e,t,o,r){var n=!0;r.display("Loading shipping manifests...",!1),e.shippingList=t.query(function(){n=!1,r.hide()}),e.$watch("query",function(o){o&&t.query({limit:5,q:o},function(t){for(var o=0;t.length>o;o++)-1==e.shippingList.indexOfById(t[o].id)&&e.shippingList.push(t[o])})}),e.loadNext=function(){n||(r.display("Loading more shipping manifests...",!1),t.query({offset:e.shippingList.length,limit:20},function(t){r.hide();for(var o=0;t.length>o;o++)e.shippingList.push(t[o])}))}}]),angular.module("employeeApp").controller("OrderShippingTodayCtrl",["$scope","Acknowledgement",function(e,t){e.startDate=new Date,e.startDate.setHours(0,0,0),e.endDate=new Date,e.endDate.setHours(0,0,0),e.endDate.setDate(e.endDate.getDate()+1),e.ackList=t.query({start_date:e.startDate.toISOString(),end_date:e.endDate.toISOString()})}]),angular.module("employeeApp").controller("OrderShippingWeekCtrl",["$scope","Acknowledgement",function(e,t){e.startDate=new Date,e.endDate=new Date,e.endDate.setDate(e.endDate.getDate()+7),e.ackList=t.query({start_date:e.startDate.toISOString(),end_date:e.endDate.toISOString()})}]),angular.module("employeeApp.services").factory("Shipping",["$resource",function(e){return e("/api/v1/shipping/:id",{id:"@id"},{update:{method:"PUT"},create:{method:"POST"}})}]),angular.module("employeeApp").controller("AdministratorGroupAddCtrl",["$scope","Group","Permission","$location",function(e,t,o,r){e.permissions=o.query({limit:0}),e.group=new t,e.group.permissions=[],e.save=function(){for(var t=0;e.permissions>t;t++)e.permissions[t].$checked&&e.group.permissions.push(e.permissions[t]);e.group.$create(function(){r.path("/administrator/group")})}}]),angular.module("employeeApp").controller("AdministratorGroupViewCtrl",["$scope","Group",function(e,t){e.groups=t.query({limit:0})}]),angular.module("employeeApp").controller("AdministratorGroupDetailsCtrl",["$scope","Group","Permission","$routeParams","$location",function(e,t,o,r,n){function i(e,t){if(!e.hasOwnProperty("length"))throw new TypeError("Expecting an Array");if("object"==typeof t&&!t.hasOwnProperty("id"))throw new TypeError("Expecting an id property for argument 2");var o="object"==typeof t?t.id:t;for(var r in e)if(e[r].id==o)return r;return-1}function a(e,t){for(var o in e)for(var r in t)e[o].id==t[r].id&&(e[o].$checked=!0)}e.permissionList=o.query({limit:0},function(){a(e.permissionList,e.group.permissions)}),e.group=t.get({id:r.id},function(){a(e.permissionList,e.group.permissions)}),e.updatePermission=function(t){if(t.$checked)-1==i(e.group.permissions,t)&&e.group.permissions.push(angular.copy(t));else{var o=i(e.group.permissions,t);o>-1&&e.group.permissions.splice(o,1)}e.group.$update(function(e){console.log(e)})},e.remove=function(){e.group.$delete(function(){n.path("/groups")})},e.$on("$destroy",function(){e.group.$update()})}]),angular.module("employeeApp").controller("AdministratorUserDetailsCtrl",["$scope","Group","User","$routeParams","$location","$http","Notification",function(e,t,o,r,n,i,a){function s(e,t){if(!e.hasOwnProperty("length"))throw new TypeError("Expecting an Array");if("object"==typeof t&&!t.hasOwnProperty("id"))throw new TypeError("Expecting an id property for argument 2");var o="object"==typeof t?t.id:t;for(var r in e)if(e[r].id==o)return r;return-1}function l(e,t){for(var o in e)for(var r in t)e[o].id==t[r].id&&(e[o].$checked=!0)}e.groupList=t.query({limit:0},function(){l(e.groupList,e.user.groups)}),e.user=o.get({id:r.id},function(){l(e.groupList,e.user.groups)}),e.changePassword=function(){var t="/user/"+e.user.id+"/change_password";i.post(t,e.password).success(function(){a.display("Password successfully changed"),e.password={},e.showChangePassword=!1}).error(function(e){console.log(e)})},e.updateGroup=function(t){if(t.$checked)-1==s(e.user.groups,t)&&e.user.groups.push(angular.copy(t));else{var o=s(e.user.groups,t);o>-1&&e.user.groups.splice(o,1)}a.display("Updating "+e.user.username+"...",!1),e.user.$update(function(){a.display(e.user.username+" updated.")})},e.remove=function(){e.user.$delete(function(){n.path("/users")})},e.update=function(){e.user.$update()},e.$on("$destroy",function(){e.user.$update()})}]),angular.module("employeeApp").controller("AdministratorUserAddCtrl",["$scope","User","Group","$location",function(e,t,o,r){e.user=new t,e.user.groups=[],e.groups=o.query({limit:0}),e.save=function(){if(e.form.$valid){for(var t=0;e.groups.length>t;t++)e.groups[t].$checked&&e.user.groups.push(angular.copy(e.groups[t]));e.user.$create(function(){r.path("/administrator/user")})}}}]),angular.module("employeeApp").controller("AdministratorUserViewCtrl",["$scope","User",function(e,t){e.users=t.query({limit:0})}]),angular.module("employeeApp.services").factory("Group",["$resource",function(e){return e("/api/v1/group/:id",{id:"@id"},{update:{method:"PUT"},create:{method:"POST"}})}]),angular.module("employeeApp.services").factory("User",["$resource",function(e){return e("/api/v1/user/:id",{id:"@id"},{update:{method:"PUT"},create:{method:"POST"}})}]),angular.module("employeeApp").controller("SupplyFabricViewCtrl",["$scope","Fabric","Notification",function(e,t,o){var r=!0;e.fabrics=t.query(function(){r=!1}),e.$watch("query",function(o){o&&t.query({q:o,limit:5},function(t){for(var o=0;t.length>o;o++)-1==e.fabrics.indexOfById(t[o].id)&&e.fabrics.push(t[o])})}),e.loadNext=function(){r||(r=!0,o.display("Loading more fabrics...",!1),t.query({offset:e.fabrics.length,limit:50},function(t){r=!1,o.hide();for(var n=0;t.length>n;n++)-1==e.fabrics.indexOfById(t[n].id)&&e.fabrics.push(t[n])}))}}]),angular.module("employeeApp").controller("SupplyFabricAddCtrl",["$scope","Supplier","Fabric","$location","Notification",function(e,t,o,r,n){e.supplierList=t.query(),e.fabric=new o,e.supplierText="Choose a Supplier for this Fabric",e.referenceText="Enter the Supplier's Reference Number",e.lengthText="Enter the Current Length of this Fabric in yards",e.widthText="Enter the Width in millimeters",e.patternText="Enter the Pattern of this Fabric",e.colorText="Enter the Color of this Fabric",e.cost="Enter the Cost per Yard of this Fabric",e.save=function(){n.display("Saving Fabric...",!1),e.form.$valid&&e.fabric.$create(function(){n.display("Fabric Saved"),r.path("supply/fabric")})},e.upload=function(){n.display("Uploading Image...",!1);var t=new FormData;t.append("image",e.images[0]),e.addLength=null,e.addRemark=null,jQuery.ajax("fabric/image",{type:"POST",data:t,processData:!1,contentType:!1,success:function(t){n.display("Image Updated"),angular.copy(t,e.fabric),e.$apply()}})}}]),angular.module("employeeApp").controller("SupplyFabricDetailsCtrl",["$scope","Fabric","$routeParams","$location","Notification","$http",function(e,t,o,r,n,i){e.fabric=t.get({id:o.id}),e.upload=function(){n.display("Uploading Image...",!1);var t=new FormData;t.append("image",e.images[0]),e.addLength=null,e.addRemark=null,jQuery.ajax("fabric/"+e.fabric.id+"/image",{type:"POST",data:t,processData:!1,contentType:!1,success:function(t){n.display("Image Updated"),console.log(t),e.fabric.image={},angular.copy(t,e.fabric.image),e.fabric.$save(),e.profileImageUrl=e.fabric.image.url,e.imagePreviews=null,e.images=null,e.$apply()}})},e.add=function(){e.fabric.$add({quantity:e.quantity},function(){}),e.showAdd=!1,e.quantity=null},e.subtract=function(){e.fabric.$subtract({quantity:e.quantity},function(){}),e.showSubtract=!1,e.quantity=null},e.viewLog=function(){i.get("fabric/"+e.fabric.id+"/log").success(function(t){e.logs=[],angular.forEach(t,function(t){e.logs.push(t)})})},e.remove=function(){n.display("Deleting Fabric..."),e.fabric.$delete(function(){n.display("Fabric Deleted"),r.path("/fabric")})},e.update=function(){n.display("Updating Fabric...",!1),e.fabric.$update(n.display("Fabric Updated"))}}]),angular.module("employeeApp").controller("SupplyFoamDetailsCtrl",["$scope","Foam","$routeParams","$location","Notification",function(e,t,o,r,n){e.foam=t.get({id:o.id}),e.upload=function(){n.display("Uploading Image...",!1);var t=new FormData;t.append("image",e.images[0]),e.addLength=null,e.addRemark=null,jQuery.ajax("supply/"+e.foam.id+"/image",{type:"POST",data:t,processData:!1,contentType:!1,success:function(t){n.display("Image Updated"),e.foam.image={},angular.copy(t,e.foam.image),e.foam.$save(),e.profileImageUrl=e.foam.image.url,e.imagePreviews=null,e.images=null,e.$apply()}})},e.remove=function(){e.foam.$delete(function(){r.path("/foam")}),e.foamList=t.query()},e.update=function(){n.display("Updating Foam...",!1),e.foam.$save(function(){n.display("Foam Updated")})}}]),angular.module("employeeApp").controller("SupplyFoamAddCtrl",["$scope","Foam","Supplier","$location","Notificaiton",function(e,t,o,r,n){e.supplierList=o.query(),e.foam=new t,e.save=function(){e.foam.$save(function(){r.path("/foam")})},e.upload=function(){n.display("Uploading Image...",!1);var t=new FormData;t.append("image",e.images[0]),e.addLength=null,e.addRemark=null,jQuery.ajax("supply/image",{type:"POST",data:t,processData:!1,contentType:!1,success:function(t){n.display("Image Updated"),e.foam.image=e.foam.image||{},angular.copy(t,e.foam.image),e.$apply()}})}}]),angular.module("employeeApp").controller("SupplyFoamViewCtrl",["$scope","Foam",function(e,t){e.foamList=t.poll().query(),e.$on("$destroy",function(){t.stopPolling()})}]),angular.module("employeeApp.services").factory("Foam",["eaResource",function(e){return e("foam/:id",{id:"@id"})}]),angular.module("employeeApp").controller("AccountingTransactionViewCtrl",["$scope","Transaction",function(e,t){e.transactionList=t.poll().query(),e.$on("$destroy",function(){t.stopPolling()})}]),angular.module("employeeApp").controller("AccountingTransactionAddCtrl",["$scope","Transaction","Notification","$location","Contact",function(e,t,o,r,n){e.transaction=new t,e.contactList=n.query(),e.save=function(){o.display("Saving Transaction...",!1),e.transaction.$save(function(){o.display("Transaction Saved"),r.path("/accounting/transaction")})}}]),angular.module("employeeApp").controller("AccountingTransactionDetailsCtrl",["$scope",function(e){e.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("employeeApp.services").factory("Transaction",["eaResource",function(e){return e("transaction/:id",{id:"@id"})}]),angular.module("employeeApp.services").factory("eaStorage",[function(){function e(e){function t(e,t){var o;for(o in t){if(!e.hasOwnProperty(o))return!1;if(e[o]!==t[o])return!1}return!0}function o(e){return e.hasOwnProperty("delivery_date")&&(e.delivery_date=new Date(e.delivery_date)),e.hasOwnProperty("time_created")&&(e.time_created=new Date(e.time_created)),e.hasOwnProperty("last_login")&&(e.last_login=new Date(e.last_login)),e}function r(e){this.namespace=e,this.collection=this.__loadFromStorage__(this.namespace)||{}}return r.__defineGetter__("length",function(){return console.log("test"),"ok"}),r.prototype.__save__=function(e){e.hasOwnProperty("id")&&(this.collection[e.id]=e)},r.prototype.__saveToStorage__=function(e,t){window.localStorage.setItem(e,JSON.stringify(t))},r.prototype.__loadFromStorage__=function(e){return JSON.parse(window.localStorage.getItem(e))},r.prototype.query=function(e){if("object"==typeof e){var r,n=[];for(r in this.collection)t(this.collection[r],e)&&(this.collection[r]=o(this.collection[r]),n.push(this.collection[r]));return n}throw new TypeError("Arguments must be in the form of a key:value object")},r.prototype.save=function(e){var t;if("[object Array]"===Object.prototype.toString.call(e))for(t in e)this.__save__(e[t]);else this.__save__(e);this.__saveToStorage__(this.namespace,this.collection)},r.prototype.get=function(e){return this.collection[e]?o(this.collection[e]):null},r.prototype.iterate=function(e){var t;for(t in this.collection)this.collection.hasOwnProperty(t)&&e(o(this.collection[t]))},r.prototype.remove=function(e){var t="object"==typeof e?e.hasOwnProperty("id")?e.id:null:e;this.collection.hasOwnProperty(t)&&(delete this.collection[t],this.__saveToStorage__(this.namespace,this.collection))},new r(e)}return e}]),angular.module("employeeApp.services").factory("eaResource",["eaStorage","$rootScope","$http","$q","$parse","$resource","$timeout","eaIndexedDB","Notification",function(e,t,o,r,n,i,a,s,l){function c(o,r,c){function p(e,t){var o={};return t=angular.extend({},r,t),angular.forEach(t,function(t,r){angular.isFunction(t)&&(t=t()),o[r]=t.charAt&&"@"==t.charAt(0)?b(e,t.substr(1)):t}),o}function u(e,t){for(var o=0;e.length>o;o++)if(e[o].hasOwnProperty("id")&&e[o].id==t)return o;return-1}function d(e){angular.extend(this,e||{}),this.$$poll=!1,this.$$last_checked,this.$$timeout,this.$$date=!0}var m,f,h,g={get:{method:"GET"},save:{method:"POST"},update:{method:"PUT"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},y=new i(o,r,c),v=(e(o.split(/\//g)[0]),s(o)),w=!0,$=!0,b=function(e,t){return n(t)(e)};return c=angular.extend({},g,c),d.disableLastChecked=function(){w=!1},d.prototype.disableLastChecked=d.disableLastChecked,d.poll=function(){return this.$$poll=!0,$=!0,this},d.prototype.poll=d.poll,d.stopPolling=function(){return this.$$poll=!1,$=!1,this},d.prototype.poll=d.poll,angular.forEach(c,function(e,o){var r="POST"==e.method||"PUT"==e.method||"PATCH"==e.method;d[o]=function(n,i,s,c){var p,g={},$=angular.noop,b=null;switch(arguments.length){case 4:b=c,$=s;case 3:case 2:if(!angular.isFunction(i)){g=n,p=i,$=s;break}if(angular.isFunction(n)){$=n,b=i;break}$=i,b=s;case 1:angular.isFunction(n)?$=n:r?p=n:g=n;break;case 0:break;default:throw"Expected between 0-4 arguments [params, data, success, error], got "+arguments.length+" arguments."}return(f!=o||g!=h)&&(this.$$last_checked=void 0),e.isArray?m=angular.isArray(m)?m||[]:[]:(m=angular.isObject(m)&&!m.hasOwnProperty("length")?m||{}:{},m=this instanceof d?this:new d(m)),"GET"!=e.method||this.$$last_checked||(v.ready?e.isArray?v.query(function(e){var o=function(){for(var t in e){var o=u(m,e[t].id);if(-1!=o)angular.copy(e[t],m[o]);else try{m.push(new d(e[t]))}catch(r){console.warn(r.stack)}}($||angular.noop)(m)};"$apply"==t.$$phase||"$digest"==t.$$phase?o():t.$apply(function(){o()})}):v.get(g.id,function(e){var o=function(){angular.copy(new d(e),m),($||angular.noop)(m)};"$digest"==t.$$phase||"$apply"==t.$$phase?o():t.$apply(function(){o()})}):v.onready=e.isArray?function(){v.query(function(e){var o=function(){for(var t in e){var o=u(m,e[t].id);if(-1!=o)angular.copy(e[t],m[o]);else try{m.push(new d(e[t]))}catch(r){console.warn(r.stack)}}($||angular.noop)(m)};"$digest"==t.$$phase||"$apply"==t.$$phase?o():t.$apply(function(){o()})})}:function(){v.get(g.id,function(e){var o=function(){angular.copy(new d(e),m),($||angular.noop)(m)};"$digest"==t.$$phase||"$apply"==t.$$phase?o():t.$apply(function(){o()})})}),void 0!=this.$$last_checked&&"GET"==e.method&&angular.extend(g,{last_modified:this.$$last_checked.toISOString()}),y[o](g,p,function(t){if(("DELETE"==e.method||r)&&angular.extend(this,t),"GET"===e.method)if(e.isArray||angular.isArray(t)){var n;for(var i in t)if(n=u(m,t[i].id),n>-1){if(!angular.equals(m[n],t[i])&&(angular.extend(m[n],new d(t[i])),m[n].deleted)){m.splice(n,1);var s=[];s.splice(n)}}else if(!t[i].deleted)try{m.push(new d(t[i]))}catch(c){console.warn(c.stack)}}else t.deleted?(angular.copy({},m),l.display("This resource no longer exists.")):angular.extend(m,new d(t));v.ready&&("DELETE"==e.method?v.remove(g):r?v.save(this):v.save(m)),w&&(this.$$last_checked=new Date),this.$$poll&&"GET"==e.method&&(this.$$timeout=a(function(){var e=d[o].bind(this);e(g,p,$,b)}.bind(this),3e4)),$(t)}.bind(this),function(e){console.log(e)}),f=o,h=g,m},d.prototype["$"+o]=function(e,t,n){var i,a=p(this),s=angular.noop;switch(arguments.length){case 3:a=e,s=t,i=n;break;case 2:case 1:angular.isFunction(e)?(s=e,i=t):(a=e,s=t||angular.noop);case 0:break;default:throw"Expected between 1-3 arguments [params, success, error], got "+arguments.length+" arguments."}var l=r?this:void 0;d[o].call(this,a,l,s,i)}}),d}return c}]),angular.module("employeeApp.services").factory("scanner",["$location","$rootScope",function(e,t){function o(){this._activeParse=!1,this._onscan}var r="";return o.prototype._check=function(e){76==e.keyCode&&e.altKey&&(this._activeParse=!0),this._activeParse&&this._parse(e)},o.prototype._parse=function(e){var t=e.keyCode;if(e.altKey)71==t&&(this._activeParse=!1,(this._onscan||this._dispatch)(r),r="");else if(t>=96&&105>=t||t>=48&&90>=t){var o=String.fromCharCode(t>=96&&105>=t?t-48:t);r+=o}else 189==t&&(r+="-")},o.prototype._dispatch=function(o){var r=o.split("-");if(console.log(o),console.log(r),r.length>1)switch(r[0]){case"A":t.$apply(function(){e.path("/order/acknowledgement/"+r[1])});break;case"AI":t.$apply(function(){e.path("/order/acknowledgement/item/"+r[1])});break;case"S":t.$apply(function(){e.path("/order/shipping/"+r[1])});break;default:}},o.prototype.enable=function(){angular.element(document.body).bind("keydown",this._check.bind(this))},o.prototype.disable=function(){angular.element(document.body).unbind("keydown",this._check.bind(this))},Object.defineProperty(o.prototype,"onscan",{set:function(e){this._onscan=e}}),new o}]),angular.module("employeeApp").controller("OrderAcknowledgementDetailsCtrl",["$scope","Acknowledgement","$routeParams","Notification","$http",function(e,t,o,r,n){r.display("Loading Acknowledgement...",!1),e.showCal=!1,e.acknowledgement=t.get({id:o.id,pdf:!0},function(){r.display("Acknowledgement Loaded")}),e.gridOptions={data:"acknowledgement.products",columnDefs:[{field:"image",displayName:"Image"}]},e.getPDF=function(t){try{var o=e.acknowledgement.pdf[t.toLowerCase()];window.open(o)}catch(n){var i="Missing "+t+" pdf for Acknowledgement #"+e.acknowledgement.id;throw r.display(i),Error(i)}},e.viewLog=function(){n.get("acknowledgement/"+e.acknowledgement.id+"/log").success(function(t){angular.forEach(t,function(t){e.logs=e.logs||[],e.logs.push(t),e.showLog=!0})})},e.save=function(){r.display("Saving Acknowledgement...",!1),e.acknowledgement.$update(function(){r.display("Acknowledgement "+e.acknowledgement.id+" saved.")},function(){r.display("Failed to save acknowledgement "+e.acknowledgement.id,!1)})}}]),angular.module("employeeApp").directive("scanner",["$location","$rootScope",function(e,t){function o(o){var r=o.split("-");if(console.log(o),console.log(r),r.length>1)switch(r[0]){case"A":t.$apply(function(){e.path("/order/acknowledgement/"+r[1])});break;case"S":t.$apply(function(){e.path("/order/shipping/"+r[1])});break;default:}}var r="";return{restrict:"A",link:function(e,t){t.keyup(function(e){var t=e.keyCode;if(t>=96&&105>=t||t>=48&&90>=t){var n=String.fromCharCode(t>=96&&105>=t?t-48:t);r+=n}else switch(t){case 13:o(r),r="";break;case 189:r+="-";break;default:}})}}}]),angular.module("employeeApp.services").factory("dateParser",[function(){return function(e){function t(e){return e.hasOwnProperty("delivery_date")&&(e.delivery_date=new Date(e.delivery_date)),e.hasOwnProperty("time_created")&&(e.time_created=new Date(e.time_created)),e.hasOwnProperty("last_login")&&(e.last_login=new Date(e.last_login)),e}return e.then(function(e){var o=e.data;if(angular.isArray(o))for(var r=0;o.length>r;r++)o[r]=t(o[r]);else angular.isObject(o)&&(o=t(o));return e.data=o,e},function(){})}}]).config(function(e){e.responseInterceptors.push("dateParser")}),angular.module("employeeApp.services").factory("Permission",["$resource",function(e){return e("/api/v1/permission/:id",{id:"@id"},{update:{method:"PUT"},create:{method:"POST"}})}]),angular.module("employeeApp").controller("OrderAcknowledgementWeeklyCtrl",["$scope","Acknowledgement",function(e,t){e.startDate=new Date,e.endDate=new Date,e.endDate.setDate(e.endDate.getDate()+7),e.ackList=t.query({start_date:e.startDate.toISOString(),end_date:e.endDate.toISOString()})}]),angular.module("employeeApp").controller("OrderAcknowledgementDailyCtrl",["$scope","Acknowledgement",function(e,t){e.today=new Date,e.ackList=t.query({date:e.today.toISOString()})}]),angular.module("employeeApp").controller("OrderShippingDetailsCtrl",["$scope","Shipping","$routeParams","Notification","$http",function(e,t,o,r){r.display("Loading Shipping Manifest...",!1),e.showCal=!1,e.shipping=t.get({id:o.id,pdf:!0},function(){r.display("Shipping Manifest Loaded")}),e.updateDeliveryDate=function(){e.showCal=!1},e.getPDF=function(){r.display("Retrieving PDF...",!1),window.open(e.shipping.pdf.url)},e.save=function(){r.display("Saving Shipping Manifest...",!1),e.shipping.$update(function(){r.display("Shipping Manifest "+e.shipping.id+" Saved")})}}]),angular.module("employeeApp.directives").directive("tooltip",[function(){function e(e,t){switch(t.tooltip){case"price":return"Enter a price in the format of 100 or 123.45";default:return e.$eval(t.tooltip)}}return{restrict:"A",link:function(t,o,r){var n=e(t,r);r.required&&(n+=" (Required)");var i=angular.element('<div class="tooltip right"><div class="tooltip-arrow"></div><div class="tooltip-inner">'+n+"</div></div>"),a=o.position();o.bind("mouseenter",function(){o.parent().append(i),i.css({left:a.left+o.outerWidth(),top:a.top-(i.outerHeight()-o.outerHeight())/2}),i.fadeTo(250,.8)}),o.bind("mouseleave",function(){i.fadeTo(250,0,function(){i.remove()})})}}}]),angular.module("employeeApp").controller("OrderAcknowledgementItemDetailsCtrl",["$scope","$routeParams","AcknowledgementItem","Fabric","Notification","$location",function(e,t,o,r,n,i){e.fabricList=r.query(),e.item=o.get({id:t.id}),e.save=function(){n.display("Saving"+e.item.description+"...",!1),e.item.$save(function(){n.display(e.item.description+" saved")},function(){n.display("There was an error in saving "+e.item.description,!1)})},e.remove=function(){n.display("Deleting "+e.item.description,!1),e.item.$delete(function(){n.display("Deleting "+e.item.description),i.path("/order/acknowledgement")})}}]),angular.module("employeeApp").factory("AcknowledgementItem",["$resource",function(e){return e("/api/v1/acknowledgement-item/:id",{id:"@id"},{update:{method:"PUT"},create:{method:"POST"}})}]),angular.module("employeeApp").controller("SupplyPropViewCtrl",["$scope","Supply","$filter","$q","Notification","$location",function(e,t,o,r,n,i){e.supplyList=t.poll().query({type:"prop"}),e.add=function(){e.safeApply(function(){i.path("/supply/prop/add")})},e.upload=function(t,i){n.display("Uploading Image...",!1);var a,s,l=o("orderBy")(o("filter")(e.supplyList,e.query),"supplier.name")[t],c=new FormData;a=r.defer(),s=a.promise,s.then(function(t){n.display("Image Updated"),e.safeApply(function(){l.image=l.image||{},angular.copy(t,l.image),l.$save(function(){n.display("Prop Saved")})})},function(){n.display("Unable to Upload Image")}),c.append("image",i),jQuery.ajax("supply/image",{type:"POST",data:c,processData:!1,contentType:!1,success:function(e){a.resolve(e)},error:function(){a.reject()}})},e.$on("$destroy",function(){t.stopPolling()})}]),angular.module("employeeApp").controller("SupplyPropAddCtrl",["$scope","Supplier","Supply","Notification","$location","$q",function(e,t,o,r,n,i){var a,s,l=!1;e.supplierList=t.query(),e.prop=new o,e.prop.type="prop",e.supplierText="Choose a Supplier for this Fabric",e.referenceText="Enter the Supplier's Reference Number",e.widthText="Enter the Width in millimeters",e.depthText="Enter the Depth in millimeters",e.heightText="Enter the Height in millimeters",e.cost="Enter the Cost in the format of 100 or 123.45",e.save=function(){if(e.form.$valid){if(l){var t=angular.copy(e.prop);s.then(function(e){t.image=t.image||{},angular.copy(e,t.image),r.display("Saving Prop...",!1),t.$save(function(){r.display("Prop Saved")})},angular.noop)}else r.display("Saving Prop...",!1),e.prop.$save(function(){r.display("Prop Saved")});n.path("/supply/prop")}},e.upload=function(){r.display("Uploading Image...",!1);var t=new FormData;t.append("image",e.images[0]),e.addLength=null,e.addRemark=null,a=i.defer(),s=a.promise,s.then(function(t){r.display("Image Updated"),e&&e.$apply(function(){e.prop.image=e.prop.image||{},angular.copy(t,e.prop.image)})},function(){r.display("Unable to Upload Image")}),l=!0,jQuery.ajax("supply/image",{type:"POST",data:t,processData:!1,contentType:!1,success:function(e){a.resolve(e)},error:function(){a.reject()}})}}]),angular.module("employeeApp").factory("Supply",["$resource",function(e){return e("/api/v1/supply/:id/:action",{id:"@id"},{create:{method:"POST"},update:{method:"PUT"},add:{method:"POST",params:{action:"add"}},subtract:{method:"POST",params:{action:"subtract"}}})}]),angular.module("employeeApp").controller("SupplyPropDetailsCtrl",["$scope",function(e){e.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("employeeApp").directive("searchBar",["$compile",function(e){return{restrict:"EA",scope:{query:"=ngModel"},link:function(t,o,r){function n(e){"70"==e.which&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),o.hasClass("focus")?(i.blur(),o.removeClass("focus")):(i.focus(),o.addClass("focus")))}var i,a=r.ngModel||"query";o.addClass("search-bar"),void 0!=r.searchBarDate?(i=angular.element('<div data-ng-model="'+a+'" class="datepicker" ui-date></div>'),o.addClass("date")):i=angular.element('<input size="40" placeholder="Search" ng-model="query" />'),e(i)(t),o.append(i),$(window).on("keydown",n),t.$on("$destroy",function(){$(window).off("keydown",n)})}}}]),angular.module("employeeApp").directive("eaSave",[function(){return{restrict:"A",link:function(e,t){t.text("this is the eaSave directive")}}}]),angular.module("employeeApp").directive("eaAdd",[function(){return{restrict:"A",link:function(e,t,o){function r(t){"65"==t.which&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),e.$eval(o.eaAdd))}$(window).on("keydown",r),e.$on("$destroy",function(){$(window).off("keydown",r)})}}}]),angular.module("employeeApp.directives").directive("imageCropper",["Notification","$compile",function(e){function t(e,t,o){this.ctx=t,this.canvas=e,this.img=o,this._scale=1,this.bX=0,this.bY=0,this.bH=this.img.height,this.bW=this.img.width,this.cropX,this.cropY,this.cropW,this.cropH,this.mouseX,this.mouseY,this.corners=[],this.xProportion=this.canvas.width/this.img.width,this.yProportion=this.canvas.height/this.img.height}return Object.defineProperties(t.prototype,{scale:{get:function(){return this._scale},set:function(e){this._scale=1>=e?e:e/100}},x:{get:function(){return this.bX},set:function(e){this.bX=e}},y:{get:function(){return this.bY},set:function(e){this.bY=e}},w:{get:function(){return this.bW},set:function(e){this.bW=e}},h:{get:function(){return this.bH},set:function(e){this.bH=e}}}),t.prototype.repositionCorners=function(){this.corners.topLeft={x:this.bX*this.xProportion,y:this.bY*this.yProportion},this.corners.topRight={x:(this.bX+this.bW)*this.xProportion,y:this.bY*this.yProportion},this.corners.bottomRight={x:(this.bX+this.bW)*this.xProportion,y:(this.bY+this.bH)*this.yProportion},this.corners.bottomLeft={x:this.bX*this.xProportion,y:(this.bY+this.bH)*this.yProportion}
},t.prototype.inCorner=function(e,t){for(var o in this.corners)if(10>=Math.sqrt(Math.pow(e-this.corners[o].x,2)+Math.pow(t-this.corners[o].y,2)))return o},t.prototype.drawCube=function(e,t){this.ctx.beginPath(),this.ctx.arc(e,t,5,0,2*Math.PI,!0),this.ctx.fill()},t.prototype.drawCubes=function(){this.ctx.fillStyle="rgb(255, 255, 255)",this.drawCube(this.bX*this.xProportion,this.bY*this.yProportion),this.drawCube((this.bX+this.bW)*this.xProportion,(this.bY+this.bH)*this.yProportion),this.drawCube((this.bX+this.bW)*this.xProportion,this.bY*this.yProportion),this.drawCube(this.bX*this.xProportion,(this.bY+this.bH)*this.yProportion)},t.prototype.drawBackground=function(){this.ctx.drawImage(this.img,0,0,this.img.width,this.img.height,0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="rgba(0, 0, 0, 0.5)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.draw=function(){this.repositionCorners(),this.drawBackground(),this.ctx.drawImage(this.img,this.bX,this.bY,this.bW,this.bH,this.bX*this.xProportion,this.bY*this.yProportion,this.bW*this.xProportion,this.bH*this.yProportion),this.drawCubes()},t.prototype.drawImage=function(){this.ctx.drawImage(this.img,0,0,this.img.width,this.img.height,0,0,this.canvas.width,this.canvas.height)},t.prototype.crop=function(e,t){if(t&&e){var o=t/e,r=this.bH/this.bW;o>r?(this.canvas.width=e,this.canvas.height=this.bH*e/this.bW,angular.element(this.canvas).css("top",(t-this.canvas.height)/2),angular.element(this.canvas).css("left",(e-this.canvas.width)/2)):(this.canvas.height=t,this.canvas.width=this.bW*t/this.bH,angular.element(this.canvas).css("left",(e-this.canvas.width)/2),angular.element(this.canvas).css("top",(t-this.canvas.height)/2))}else this.canvas.width=this.bW,this.canvas.height=this.bH;this.ctx.drawImage(this.img,this.x,this.y,this.w,this.h,0,0,this.canvas.width,this.canvas.height)},t.prototype.getImageAsURL=function(){var e=document.createElement("canvas"),t=e.getContext("2d");return e.width=this.w*this._scale,e.height=this.h*this._scale,t.drawImage(this.img,this.x,this.y,this.w,this.h,0,0,this.w*this._scale,this.h*this._scale),e.toDataURL("image/jpeg")},t.prototype.getImageAsBlob=function(){var e=this.getImageAsURL(),t=atob(e.split(",")[1]),o=new Uint8Array(t.length);for(var r in t)o[r]=t.charCodeAt(r);return new Blob([o],{type:"image/jpeg"})},{restrict:"A",template:'<div class="cropper">                            <div class="cropper-message" ng-show="!cropper.image.loaded"><h3>Drop Image Here</h3></div>                            <div class="cropper-controller" ng-show="cropper.image.loaded">                                <button ng-click="cropper.crop()" ng-show="!cropper.cropping">Crop</button>                                <button ng-click="cropper.save()" ng-show="cropper.cropping">Done Cropping</button>                                <button ng-click="save()" ng-show="!cropper.cropping">Save</button>                                <button data-ng-click="preview(cropper.getImageAsURL())">Preview</button>                                <table class="cropper-scale">                                    <tr>                                        <td>Scale:</td>                                        <td><input class="scale" type="number" data-ng-model="cropper.scale" min="0" max="100">%</td>                                    </tr>                                    <tr>                                        <td>Width</td>                                        <td>{{cropper.image.scaled_width | number:0}}px</td>                                    </tr>                                    <tr>                                        <td>Height</td>                                        <td>{{cropper.image.scaled_height | number:0}}px</td>                                    </tr>                                </table>                            </div>                            <div class="canvas-container" ng-show="cropper.image.loaded">                                <canvas class="cropper-canvas"></canvas>                            </div>                        </div>',replace:!0,scope:{onSave:"&",onLoad:"&"},link:function(o,r){function n(e){e.preventDefault(),w=!0,l=e.offsetX,c=e.offsetY,p=u.inCorner(e.offsetX,e.offsetY),u.canvas.style.cursor="move"}function i(e){if(w){if(p)switch(p){case"topLeft":u.w=u.w+(l-e.offsetX)/u.xProportion,u.h=u.h+(c-e.offsetY)/u.yProportion,u.y=u.y-(c-e.offsetY)/u.yProportion,u.x=u.x-(l-e.offsetX)/u.xProportion;break;case"topRight":u.w=u.w-(l-e.offsetX)/u.xProportion,u.h=u.h+(c-e.offsetY)/u.yProportion,u.y=u.y-(c-e.offsetY)/u.yProportion;break;case"bottomRight":u.w=u.w-(l-e.offsetX)/u.xProportion,u.h=u.h-(c-e.offsetY)/u.yProportion;break;case"bottomLeft":u.x=u.x-(l-e.offsetX)/u.xProportion,u.h=u.h-(c-e.offsetY)/u.yProportion,u.w=u.w+(l-e.offsetX)/u.xProportion}else{var t=u.corners.topLeft,r=u.corners.bottomRight;u.y=t.y-(c-e.offsetY)>0&&r.y-(c-e.offsetY)<u.img.height*u.yProportion?u.y-(c-e.offsetY)/u.yProportion:0>=t.y-(c-e.offsetY)?0:(u.canvas.height-(r.y-t.y))/u.yProportion,u.x=t.x-(l-e.offsetX)>0&&r.x-(l-e.offsetX)<u.img.width*u.xProportion?u.x-(l-e.offsetX)/u.xProportion:0>=t.x-(l-e.offsetX)?0:(u.canvas.width-(r.x-t.x))/u.xProportion}l=e.offsetX,c=e.offsetY,u.draw(),o.$apply()}}function a(){w=!1,p=!1}function s(){w=!1,p=!1}var l,c,p,u,d,m=r.find(".canvas-container"),f=m.find("canvas"),h=m.find("canvas")[0],g=r,y=new FileReader,v=h.getContext("2d"),w=!1;h.width=m.outerWidth(),h.height=m.outerHeight(),y.onload=function(r){g.removeClass("drag-drop-active"),d=new Image,d.onload=function(r){e.display("Image Rendered");var n=m.innerHeight(),i=m.innerWidth(),a=n/i,s=d.height/d.width;a>s?(h.width=i,h.height=d.height*i/d.width):(h.height=n,h.width=d.width*n/d.height),angular.element(h).css("top",(n-h.height)/2),angular.element(h).css("left",(i-h.width)/2),u=new t(h,v,d),u.drawImage();try{o.onLoad()}catch(r){console.log(r)}o.$apply()},d.src=r.target.result},r.bind("dragenter",function(e){e.preventDefault(),g.addClass("drag-drop-active")}),r.bind("dragleave",function(e){e.preventDefault(),g.removeClass("drag-drop-active")}),r.bind("dragover",function(e){e.preventDefault(),g.addClass("drag-drop-active")}),r.bind("drop",function(t){t.preventDefault(),t.stopPropagation(),e.display("Processing Image...",!1),g.removeClass("drag-drop-active");var o=t.originalEvent,r=o.dataTransfer.files[0];y.readAsDataURL(r)}),o.cropper={cropping:!1,image:{}},Object.defineProperties(o.cropper,{scale:{get:function(){return u?100*u.scale:100},set:function(e){u&&(u.scale=e)}}}),Object.defineProperties(o.cropper.image,{width:{get:function(){return u?u.w?u.w:0:0}},height:{get:function(){return u?u.h?u.h:0:0}},scaled_height:{get:function(){return u?u.h?u.h*u.scale:0:0}},scaled_width:{get:function(){return u?u.w?u.w*u.scale:0:0}},loaded:{get:function(){return u?!0:!1}}}),o.cropper.crop=function(){o.cropper.cropping=!0,u.x=10,u.y=10,u.w=u.w-20,u.h=u.h-20,u.canvas.style.cursor="move",u.draw(),f.bind("mousedown",n),f.bind("mousemove",i),f.bind("mouseup",a),f.bind("mouseleave",s)},o.cropper.save=function(){o.cropper.cropping=!1,u.canvas.style.cursor="move",u.crop(m.innerWidth(),m.innerHeight()),f.unbind("mousedown",n),f.unbind("mousemove",i),f.unbind("mouseup",a),f.unbind("mouseleave",s)},o.cropper.upload=function(){},o.cropper.getImage=function(){return u?u.getImageAsBlob():null},o.cropper.getImageAsURL=function(){return o.cropper.getImageURL()},o.cropper.getImageURL=function(){return u?u.getImageAsURL():null},o.preview=function(e){e&&window.open(e)},o.cropper.reset=function(){u=void 0},o.save=function(){o.onSave({$image:o.cropper.getImage()}),o.cropper.reset()}}}}]),angular.module("employeeApp.services").factory("indexOfId",["$q",function(){function e(){this.worker=new Worker("scripts/workers/index-of-id.js")}e.prototype._prepare_id=function(){},e.prototype.filter=function(e,t,o){this._prepare_id(e),this.worker.onmessage=function(e){(o||angular.noop)(e.data)}}}]),angular.module("employeeApp").controller("SupplyLumberViewCtrl",["$scope",function(e){e.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("employeeApp.services").factory("Contact",["eaResource",function(e){return e("contact/:id",{id:"@id"})}]),angular.module("employeeApp.services").factory("eaIndexedDB",["$q","$timeout","$rootScope",function(){function e(){return["customer","supplier","supplier-contact","permission","acknowledgement","acknowledgement-item","contact","shipping","transaction","fabric","supply","model","product","configuration","upholstery","group","user","delivery","table","project","project-room","project-item","purchase-order","test"]}function t(e){try{var t=e.split(/\//),o=RegExp(/^\:/);e="";for(var r in t)o.test(t[r])||(e.length>0&&(e+="-"),e+=t[r]);return e}catch(n){throw new TypeError("Must be a string")}}function o(e){function o(e){this.namespace=e,this.indexedDB=r,this.DBVehicle=a,Object.defineProperties(this,{db:{get:function(){return this.DBVehicle.db}},ready:{get:function(){return this.DBVehicle.db?!0:!1}},onready:{set:function(e){this.DBVehicle.onready=e}}})}e=t(e);var n=JSON.parse(window.localStorage.getItem("namespaces"))||[];return-1==n.indexOf(e)&&n.push(e),window.localStorage.setItem("namespaces",JSON.stringify(n)),o.prototype._cleanObj=function(e){var t=RegExp(/^\$/);for(var o in e)(t.test(o)||angular.isFunction(e[o]))&&delete e[o];return e},o.prototype._save=function(e,t,o){try{var r=this._cleanObj(e),n=this.db.transaction([this.namespace],"readwrite").objectStore(this.namespace).put(r);n.onsuccess=function(){(t||angular.noop)()},n.onerror=function(e){console.error(e),(o||angular.noop)(e)}}catch(i){console.error(i),(o||angular.noop)(i)}},o.prototype._get=function(e,t,o){try{e=parseFloat(e),this.db.transaction(this.namespace).objectStore(this.namespace).get(e).onsuccess=function(e){var o=e.target.result||null;(t||angular.noop)(o)}}catch(r){console.error(r.stack),(o||angular.noop)()}},o.prototype._query=function(e,t,o){var r=[],n=this.db.transaction([this.namespace],"readonly").objectStore(this.namespace),i=n.openCursor();i.onsuccess=function(e){var o=e.target.result;o?(r.push(o.value),o.continue()):(t||angular.noop)(r)},i.onerror=function(e){console.error(e),(o||angular.noop)()}},o.prototype._remove=function(e,t,o){var r=this.db.transaction([this.namespace],"readwrite").objectStore(this.namespace).delete(e);r.onsuccess=function(){(t||angular.noop)()},r.onerror=function(){(o||angular.noop)()}},o.prototype._clear=function(e,t){try{var o=this.db.transaction(this.namespace,"readwrite").objectStore(this.namespace);o.clear().onsuccess=function(){(e||angular.noop)()}}catch(r){console.error(r.stack),(t||angular.noop)(r)}},o.prototype.query=function(e,t,o){var r,n,i;switch(arguments.length){case 1:angular.isFunction(e)?r=e:i=e;break;case 2:angular.isFunction(e)?(r=e,n=t):(params=e,r=t);break;case 3:angular.isFunction(e)?(r=e,n=t):(i=e,r=t,n=o);break;default:throw new RangeError("Expects between 1-3 arguments")}try{this._query(i,r,n)}catch(a){}},o.prototype.get=function(e,t,o){if(1>arguments.length&&arguments.length>3)throw new RangeError("Expects between 1-3 argumeents");try{this._get(e,t,o)}catch(r){console.error(r)}},o.prototype.save=function(e,t,o){try{if(angular.isArray(e)){for(var r in e)this._save(e[r]);(t||angular.noop)()}else this._save(e,t,o)}catch(n){console.error(n.stack)}},o.prototype.remove=function(e,t,o){try{this._remove(e,t,o)}catch(r){console.error(r)}},o.prototype.clear=function(e,t){this._clear(e,t)},o.prototype.destroy=function(e){this.indexedDB.deleteDatabase("app").onsuccess=function(){(e||angular.noop)()}},new o(e)}var r=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,n=e().length,i=r.open("app",n),a={_readyFns:[]};return Object.defineProperties(a,{onready:{set:function(e){this._readyFns.push(e)},get:function(){return function(){for(var e in this._readyFns)this._readyFns[e]()}}}}),i.onupgradeneeded=function(){var t=e();a.db=i.result;var o=a.db;for(var r in t)o.objectStoreNames.contains(t[r])||o.createObjectStore(t[r],{keyPath:"id"})},i.onsuccess=function(){a.db=i.result,a.onready()},i.onerror=function(e){console.error(e)},o}]),angular.module("employeeApp").controller("ProductInventoryCtrl",["$scope","AcknowledgementItem",function(e,t){e.itemList=t.poll().query({status:"inventory"}),e.showAddInventory=!1,e.addInventory=function(o){e.item=new t,angular.extend(e.item,JSON.parse(JSON.stringify(o))),o.hasOwnProperty("id")&&(e.item.product={id:o.id}),delete e.item.id,e.item.status="INVENTORY",e.item.$save(function(){e.itemList.push(angular.copy(e.item))})},e.$on("$destroy",function(){e.AcknowledgementItem.stopPolling()})}]),angular.module("employeeApp.services").factory("Geocoder",["$q","$rootScope",function(e,t){function o(e){var t="";if(!e.hasOwnProperty("address")&&!e.hasOwnProperty("address1"))throw new TypeError("Missing 'address' or 'address1' argument");if(t+=e.address||e.address1,!e.hasOwnProperty("city"))throw new TypeError("Missing 'city' argument");if(t+=", "+e.city,!e.hasOwnProperty("territory"))throw new TypeError("Missing 'territory' argument");if(t+=", "+e.territory,!e.hasOwnProperty("country"))throw new TypeError("Missing 'country' argument");if(t+=", "+e.country,!e.hasOwnProperty("zipcode"))throw new TypeError("Missing 'zipcode' argument");return t+=", "+e.zipcode}var r={};return r.init=function(){var e=e||void 0;this.geocoder=e?new e.maps.Geocoder:{}},r._getRegion=function(e){switch(e.toLocaleLowerCase()){case"thailand":return"TH";case"usa":return"US";case"us":return"US";case"italy":return"IT";case"spain":return"ES";case"germany":return"DE";case"china":return"CN";case"india":return"IN";case"new zealand":return"NZ";case"australia":return"AU";default:return!1}},r._lookup=function(e,t,r){var n=o(e);this.geocoder.geocode({address:n,region:this._getRegion(e.country)},function(e,o){o==google.maps.GeocoderStatus.OK?(t||angular.noop)(e):(console.error(o),(r||angular.noop)(o))})},r.geocode=function(o){if(angular.isObject(o)){var r=e.defer();return this._lookup(o,function(e){t.safeApply(function(){r.resolve(e)})},function(e){t.safeApply(function(){r.reject(e)})}),r.promise}throw new TypeError("Arguments must be in the form of an object.")},r.init(),r}]),angular.module("employeeApp.services").factory("mapMarker",[function(){function e(e){function t(e){if(angular.isObject(e)){if(!(e.map instanceof google.maps.Map))throw new TypeError("Is not an instance of google.maps.Map");if(this._map=e.map,!e.position instanceof google.maps.LatLng)throw new TypeError("Is not an instance of google.maps.LatLng");this._marker=new google.maps.Marker({position:e.position,map:this._map,draggable:!0,animation:google.maps.Animation.DROP}),google.maps.event.addListener(this._marker,"dragend",function(e){(this.onchange||angular.noop)(e.latLng)}.bind(this))}}return Object.defineProperties(t.prototype,{lat:{get:function(){return this._marker.getPosition().lat()||null}},lng:{get:function(){return this._marker.getPosition().lng()||null}}}),t.prototype.setPosition=function(e){e instanceof google.maps.LatLng&&this._marker.setPosition(e)},t.prototype.hide=function(){this._marker.setMap(null)},t.prototype.show=function(){this._marker.setMap(this._map)},new t(e)}return e}]),angular.module("employeeApp").controller("OrderShippingDeliveryCtrl",["$scope","Delivery",function(e,t){e.deliveryList=t.query()}]),angular.module("employeeApp").factory("Delivery",["eaResource",function(e){return e("delivery/:id",{id:"@id"})}]),angular.module("employeeApp").controller("ProductTableViewCtrl",["$scope","Table","Notification",function(e,t,o){var r=!0;o.display("Loading Tables..."),e.tableList=t.query(function(){r=!1,o.hide()}),e.$watch("query",function(o){o&&t.query({q:o,limit:5},function(t){for(var o=0;t.length>o;o++)-1==e.tableList.indexOfById(t[o])&&e.tableList.push(t[o])})}),e.loadNext=function(){r||t.query({offset:e.tableList.length,limit:50},function(t){for(var o=0;t.length>o;o++)e.tableList.push(t[o])})}}]),angular.module("employeeApp.services").factory("Table",["$resource",function(e){return e("api/v1/table/:id",{id:"@id"},{update:{method:"PUT"},create:{method:"POST"}})}]),angular.module("employeeApp").controller("ProductRugViewCtrl",["$scope",function(e){e.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("employeeApp").controller("ProductRugAddCtrl",["$scope",function(e){e.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("employeeApp").directive("background",[function(){return{restrict:"E",link:function(e,t,o){if(!o.backgroundImages)throw new TypeError("Missing Images for Background Directive.")}}}]),angular.module("employeeApp").controller("ProductTableDetailsCtrl",["$scope","Table","$routeParams","Notification","$location",function(e,t,o,r,n){e.table=t.get({id:o.id}),e.upload=function(){r.display("Uploading Image...",!1);var t=new FormData;t.append("image",e.images[0]),jQuery.ajax("upholstery/image",{type:"POST",data:t,cache:!1,processData:!1,contentType:!1,success:function(t){r.display("Image Updated"),e.table.image={},angular.copy(t,e.uphol.image),e.table.$save(),e.imagePreviews=null,e.images=null,e.$apply()}})},e.update=function(){r.display("Saving Table...",!1),e.table.$update(function(){r.display("Table Saved")})},e.remove=function(){r.display("Deleteing Table Product"),e.table.$delete(function(){r.display("Table Product Deleted"),n.path("/product/table")})},e.$on("$destroy",function(){e.update()})}]),angular.module("employeeApp").controller("ProductTableAddCtrl",["$scope","Table","Configuration","Model","Notification","$location",function(e,t,o,r,n,i){e.configurationList=o.query({limit:0}),e.modelList=r.query({limit:0}),e.table=new t,e.modelText="Choose a Model",e.configurationText="Choose a Configuration",e.widthText="Enter a Width in millimeters",e.depthText="Enter a Depth in millimeters",e.upload=function(){n.display("Uploading Image...",!1);var t=new FormData;t.append("image",e.images[0]),e.addLength=null,e.addRemark=null,jQuery.ajax("upholstery/image",{type:"POST",data:t,processData:!1,contentType:!1,success:function(t){console.log(t),n.display("Image Uploaded"),e.table.image=e.table.image||{},angular.copy(t,e.table.image),e.$apply()}})},e.save=function(){n.display("Saving Table Product..."),e.table.$create(function(){n.display("Table Product Saved"),i.path("/product/table")})}}]),angular.module("employeeApp").controller("ProjectViewCtrl",["$scope","Project","Notification","Customer","$location",function(e,t,o,r){e.showAddProject=!1,e.projectList=t.poll().query(),e.customerList=r.poll().query(),e.gridOptions={data:"projectList",columnDefs:[{field:"description",displayName:"Description"},{field:"customer.name",displayName:"customer"},{field:"type",displayName:"Type"},{field:"status",displayName:"Status"},{field:"delivery_date",displayName:"Delivery Date",filter:'date:"MMMM d, yyyy"'}]},e.create=function(){o.display("Creating new project...",!1);var r=new t;angular.extend(r,e.project),r.$save(function(t){o.display("New project created."),e.projectList.push(t),e.project={},e.showAddProject=!1})},e.$on("$destroy",function(){t.stopPolling(),r.stopPolling()})}]),angular.module("employeeApp").controller("ProjectDetailsCtrl",["$scope","Project","$routeParams","Room","Notification","FileUploader",function(e,t,o,r,n,i){e.showAddRoom=!1,e.flag=!1,e.project=t.poll().get({id:o.id}),e.room={},e.addImage=function(t){var o=i.upload(t,"project/room/image");o.then(function(t){e.room.image=t,e.cropper.reset()})},e.addSchematic=function(t){var o=angular.isArray(t)?t[0]:t,r=i.upload(o,"project/room/schematic");r.then(function(t){e.room.schematic=t})},e.addRoom=function(){n.display("Adding "+e.room.type,!1);var t=new r;angular.extend(t,e.room),t.project={id:e.project.id},t.$save(function(){n.display(e.room.description+" added."),e.showAddRoom=!1,e.project.rooms.push(t)},function(t){e.flag=!0,console.log(t)})},e.$on("$destroy",function(){t.stopPolling()})}]),angular.module("employeeApp.services").factory("Project",["eaResource",function(e){return e("project/:id",{id:"@id"})}]),angular.module("employeeApp.services").factory("Room",["eaResource",function(e){return e("project/room/:id",{id:"@id"})}]),angular.module("employeeApp.directives").directive("checkmark",[function(){return{restrict:"A",link:function(e,t,o){if(!o.checkmark)throw new TypeError("Missing expression to evaluate.");var r=angular.element('<span class="checkmark"></span>');e.$watch(o.checkmark,function(e){e?t.append(r):r.remove()})}}}]),angular.module("employeeApp.directives").directive("x",[function(){return{restrict:"A",link:function(e,t,o){if(!o.x)throw new TypeError("Missing expression to evaluate.");var r=angular.element('<span class="x-mark"></span>');e.$watch(o.x,function(e){e?t.append(r):r.remove()})}}}]),angular.module("employeeApp").controller("HrEmployeeViewCtrl",["$scope","User",function(e,t){e.employeeList=t.poll().query(),e.$on("$destroy",function(){t.stopPolling()})}]),angular.module("employeeApp").factory("ProjectItem",["eaResource",function(e){return e("project/item/:id",{id:"@id"})}]),angular.module("employeeApp").directive("productSelector",["Upholstery","Fabric","Table","$rootScope","Notification","FileUploader",function(e,t,o,r){return{templateUrl:"views/templates/product-selector.html",replace:!0,restrict:"A",scope:{visible:"=productSelector",url:"@productSelectorUploadUrl",add:"&productSelectorAdd"},link:function(e){e.$watch("visible",function(t){t?(e.modal.onhide=function(){"$digest"==r.$$phase||"$apply"==r.$$phase?e.visible=!1:r.$apply(function(){e.visible=!1})},e.modal.show()):e.modal.hide()}),e.fabricList=t.query(),e.tableList=o.query(),e.product={},e.addImage=function(t){console.log(t),e.product.image=t},e.addUpholstery=function(t){if(!t)throw new TypeError("Expecting an Upholstery.");e.product=t,e.selection="quantity"},e.addTable=function(t){if(!t)throw new TypeError("Expecting a Table.");e.product=t,e.selection="quantity"},e.addCustomItem=function(t){if(!t)throw new TypeError("Expecting a Custom Item and Image.");angular.extend(e.product,t),e.product.is_custom=!0,e.product.type="custom",e.selection="quantity"},e.setQuantity=function(t){if(e.product.quantity=t,"upholstery"==e.product.type.toLowerCase())e.selection="fabric";else{e.visible=!1,e.modal.hide(function(){e.reset()});var o=angular.copy(e.product);e.add({product:o})}},e.setFabric=function(){e.visible=!1,e.modal.hide(function(){e.reset()});var t=angular.copy(e.product);e.add({product:t})},e.reset=function(){e.product={},e.selection="upholstery"}}}}]),angular.module("employeeApp").directive("fileHandler",["$rootScope",function(){return{template:'<div class="file-handler">                            <div class="file-handler-message" ng-hide="files.length>0">                                <h3>Drop File Here</h3>                            </div>                            <div class="file-handler-list">                                <ul>                                    <li ng-repeat="file in files">{{file.name}}</li>                                </ul>                            </div>                       </div>',restrict:"A",scope:{files:"=fileHandler"},replace:!0,link:function(e,t){new FileReader,console.log("test"),t.bind("dragenter",function(e){console.log("enter"),e.preventDefault(),t.addClass("drag-drop-active"),t.addClass("drag-over")}),t.bind("dragleave",function(e){e.preventDefault(),t.removeClass("drag-drop-active"),t.removeClass("drag-over")}),t.bind("dragover",function(e){e.preventDefault(),t.addClass("drag-drop-active"),t.addClass("drag-over")}),t.bind("drop",function(o){o.preventDefault(),o.stopPropagation(),t.removeClass("drag-drop-active"),t.removeClass("drag-over");var r=o.originalEvent,n=r.dataTransfer.files;console.log(n),e.files=n})}}}]),angular.module("employeeApp").controller("ProjectRoomDetailsCtrl",["$scope","Room","$routeParams","ProjectItem","Notification",function(e,t,o,r,n){e.room=t.poll().get({id:o.id}),e.gridOptions={data:"room.items",columnDefs:[{field:"description",displayName:"Description"},{field:"status",displayName:"Status"},{field:"delivery_date",displayName:"Delivery Date",filter:'date:"MMMM d, yyyy"'},{field:"schematic",displayName:"Schematic",cellTemplate:"<div file-handler><div>"}]},e.addProduct=function(t){n.display("Adding "+t.description+" to "+e.room.description,!1);var o=new r;o.product=t,o.type="product",o.room={id:e.room.id},o.reference=e.room.reference+(e.room.items.length+1),o.$save(function(){n.display(o.description+" added to "+e.room.description),e.room.items.push(o)})},e.$on("$destroy",function(){t.stopPolling()})}]),angular.module("employeeApp").factory("s3",[function(){var e=42;return{someMethod:function(){return e}}}]),angular.module("employeeApp").factory("FileUploader",["$q","Notification",function(e,t){var o={};return o.upload=function(o,r,n){if(!o.isPrototypeOf)throw new TypeError("Expectina a file");var i=o.isPrototypeOf(Image)?"Image":"File";t.display("Uploading "+i+"...",!1);var a=new FormData;a.append(i.toLowerCase(),o);for(var s in n)a.append(s,n[s]);var l=e.defer();return jQuery.ajax(r||"upload/images",{type:"POST",data:a,processData:!1,contentType:!1,success:function(e){t.display(i+" Uploaded"),l.resolve(e)},error:function(e){l.reject(e)}}),l.promise},o}]),angular.module("employeeApp").filter("available",[function(){return function(e){return"available filter: "+e}}]),angular.module("employeeApp").controller("SupplyViewCtrl",["$scope","Supply","Notification","$filter","Supplier",function(e,t,o){var r=!0;o.display("Loading supplies...",!1),e.supplies=t.query(function(){r=!1,o.hide()}),e.$watch("query",function(o){o&&t.query({limit:10,q:o},function(t){for(var o=0;t.length>o;o++)-1==e.supplies.indexOfById(t[o].id)&&e.supplies.push(t[o])})}),e.loadNext=function(){r||t.query({offset:e.supplies.length,limit:50},function(t){for(var o=0;t.length>o;o++)e.supplies.push(t[o])})}}]),angular.module("employeeApp").controller("OrderPurchaseOrderViewCtrl",["$scope","PurchaseOrder","$filter","Notification",function(e,t,o,r){var n=!0;r.display("Loading purchase orders...",!1),e.poList=t.query(function(){n=!1,r.hide()},function(){n=!1}),e.$watch("query",function(o){o&&t.query({limit:5,q:o},function(t){for(var o=0;t.length>o;o++)-1==e.poList.indexOfById(t[o].id)&&e.poList.push(t[o])})}),e.loadNext=function(){n||(n=!0,t.query({limit:20,offset:e.poList.length},function(t){n=!1;for(var o=0;t.length>o;o++)e.poList.push(t[o])}))}}]),angular.module("employeeApp").factory("PurchaseOrder",["$resource",function(e){return e("/api/v1/purchase-order/:id",{id:"@id"},{create:{method:"POST"},update:{method:"PUT"}})}]),angular.module("employeeApp").controller("OrderPurchaseOrderCreateCtrl",["$scope","PurchaseOrder","Supplier","Supply","Notification","$filter",function(e,t,o,r,n,i){e.showSuppliers=!1,e.showSupplies=!1,e.suppliers=o.query({limit:0}),e.po=new t,e.po.items=[],e.addSupplier=function(t){e.showSuppliers=!1,e.po.supplier=t,e.supplies=i("filter")(r.query({supplier_id:t.id},function(o){e.supplies=i("filter")(o,t.name)}),t.name)},e.addItem=function(t){e.showSupplies=!1;var o=angular.copy(t);delete o.quantity,e.po.items.push(o)},e.removeItem=function(t){e.po.items.splice(t,1)},e.subtotal=function(){for(var t=0,o=0;e.po.items.length>o;o++)t+=Number(e.po.items[o].cost)*Number(e.po.items[o].quantity||1);return t.toFixed(2)},e.total=function(){var t=Number(e.subtotal()),o=t*(Number(e.po.vat||0)/100);return o+t},e.verifyOrder=function(){return e.po.hasOwnProperty("supplier")?0>=e.po.items.length?!1:!0:!1},e.save=function(){e.verifyOrder()&&(n.display("Creating purchase order...",!1),e.po.$save(function(e){try{window.open(e.pdf.url)}catch(t){console.log(t)}n.display("Purchase order created.")},function(){n.display("ooops")}))},e.reset=function(){e.po=new t,e.po.items=[]}}]),angular.module("employeeApp.directives").directive("addSupply",["$rootScope","Supplier","Supply","Notification",function(e,t,o,r){return{templateUrl:"views/templates/add-supply.html",replace:!0,restrict:"EA",scope:{visible:"=addSupply"},link:function(n){n.$watch("visible",function(t){if(t){n.modal.onhide=function(){"$digest"==e.$$phase||"$apply"==e.$$phase?n.visible=!1:e.$apply(function(){n.visible=!1})};try{n.modal.show()}catch(o){}}else try{n.modal.hide()}catch(o){}}),n.showWidth=function(){var e=n.supply.units,t=n.supply.type;return"m"==e||"pc"==e||"pack"==e||"yd"==e||"kg"==e&&"packaging"==t?!0:!1},n.showDepth=function(){var e=n.supply.units;return"pc"==e||"pack"==e?!0:!1},n.showHeight=function(){var e=n.supply.units,t=n.supply.type;return"pc"==e||"pack"==e||"kg"==e&&"packaging"==t?!0:!1},n.supply=new o,n.supply.units="piece",n.suppliers=t.query({limit:0}),n.add=function(){n.form.$valid?(r.display("Add supply...",!1),n.supply.$create(function(){r.display(n.supply.description+" added"),n.visible=!1,n.supply=new o},function(e){console.log(e)})):r.display("Please fill out the form properly")},n.addImage=function(e){n.supply.image=e}}}}]),angular.module("employeeApp.directives").directive("addSupplier",["$rootScope","Supplier","Notification",function(e,t,o){return{templateUrl:"views/templates/add-supplier.html",replace:!0,restrict:"EA",scope:{visible:"=addSupplier"},link:function(r){r.$watch("visible",function(t){t?(r.modal.onhide=function(){"$digest"==e.$$phase||"$apply"==e.$$phase?r.visible=!1:e.$apply(function(){r.visible=!1})},r.modal.show()):r.modal.hide()}),r.supplier=new t,r.add=function(){console.log(r.supplier),r.form.$valid?(o.display("Adding supplier...",!1),r.supplier.$save(function(){o.display(r.supplier.name+" added"),r.visible=!1,r.supplier=new t},function(e){console.log(e)})):o.display("Please fill out the form properly")}}}}]),angular.module("employeeApp").factory("inventory",[function(){var e=42;return{someMethod:function(){return e}}}]),angular.module("employeeApp").directive("onScrollEnd",[function(){return{restrict:"A",link:function(e,t,o){t.bind("scroll",function(){var r=$(t.children()[0]).height(),n=t.height();if(r>=n&&t.scrollTop()+n>=r-10)try{e.$eval(o.onScrollEnd)}catch(i){console.error("Missing a function for 'on-scroll-end'")}})}}}]),angular.module("employeeApp").directive("customerList",["Customer","Notification","$parse",function(e,t){return{templateUrl:"views/templates/customer-list.html",replace:!0,restrict:"A",scope:{visible:"=customerList",onSelect:"&"},link:function(o){var r=!0;o.$watch("visible",function(e){if(e){o.modal.onhide=function(){"$digest"==$rootScope.$$phase||"$apply"==$rootScope.$$phase?o.visible=!1:$rootScope.$apply(function(){o.visible=!1})};try{o.modal.show()}catch(t){}}else try{o.modal.hide()}catch(t){}}),o.customers=e.query({limit:20},function(){r=!1}),o.$watch("query",function(t){t&&e.query({q:t,limit:5},function(e){for(var t=0;e.length>t;t++)-1==o.customers.indexOfById(e[t].id)&&o.customers.push(e[t])})}),o.loadNext=function(){r||(t.display("Loading more customers...",!1),r=!0,e.query({offset:o.customers.length,limit:50},function(e){r=!1,t.hide();for(var n=0;e.length>n;n++)o.customers.push(e[n])}))},o.select=function(e){o.onSelect({customer:e})}}}}]),angular.module("employeeApp").directive("upholsteryList",["Upholstery","Notification",function(e,t){return{templateUrl:"views/templates/upholstery-list.html",replace:!0,restrict:"A",scope:{onSelect:"&"},link:function(o){var r=!0;o.upholsteries=e.query({limit:20},function(){r=!1}),o.$watch("query",function(t){t&&e.query({q:t,limit:10},function(e){for(var t=0;e.length>t;t++)-1==o.upholsteries.indexOfById(e[t].id)&&o.upholsteries.push(e[t])})}),o.loadNext=function(){r||(t.display("Loading more upholsteries...",!1),r=!0,e.query({offset:o.upholsteries.length,limit:50},function(e){r=!1,t.hide();for(var n=0;e.length>n;n++)o.upholsteries.push(e[n])}))},o.select=function(e){o.onSelect({$upholstery:e})}}}}]),angular.module("employeeApp").directive("tableList",["Table","Notification",function(e,t){return{templateUrl:"views/templates/table-list.html",replace:!0,restrict:"A",scope:{onSelect:"&"},link:function(o){var r=!0;
o.tables=e.query({limit:20},function(){r=!1}),o.$watch("query",function(t){t&&e.query({q:t,limit:10},function(e){for(var t=0;e.length>t;t++)-1==o.tables.indexOfById(e[t].id)&&o.tables.push(e[t])})}),o.loadNext=function(){r||(t.display("Loading more upholsteries...",!1),r=!0,e.query({offset:o.tables.length,limit:50},function(e){r=!1,t.hide();for(var n=0;e.length>n;n++)o.tables.push(e[n])}))},o.select=function(e){o.onSelect({$table:e})}}}}]),angular.module("employeeApp").directive("fabricSelector",["Fabric","Notification","$parse",function(e,t){return{templateUrl:"views/templates/fabric-selector.html",replace:!0,restrict:"A",scope:{product:"=",onComplete:"&"},link:function(o){var r=!0;o.fabrics=e.query(function(){r=!1}),o.$watch("query",function(t){t&&e.query({q:t,limit:5},function(e){for(var t=0;e.length>t;t++)-1==o.fabrics.indexOfById(e[t].id)&&o.fabrics.push(e[t])})}),o.loadNext=function(){r||(t.display("Loading more fabrics...",!1),r=!0,e.query({offset:o.fabrics.length,limit:50},function(e){r=!1,t.hide();for(var n=0;e.length>n;n++)o.fabrics.push(e[n])}))},o.done=function(){o.onComplete()}}}}]),angular.module("employeeApp").controller("OrderPurchaseOrderDetailsCtrl",["$scope","$routeParams","PurchaseOrder","Notification",function(e,t,o,r){r.display("Loading purchase order "+t.id+"...",!1),e.po=o.get({id:t.id,pdf:!0},function(){r.hide()}),e.viewPDF=function(){window.open(e.po.pdf.url)},e.receive=function(){if(e.po.receive_date){r.display("Updating purchase order...",!1),e.showCal=!1,e.po.status="Received";for(var t=0;e.po.items.length>t;t++)e.po.items[t].status="Received";e.po.$update(function(){r.display("Purchase order updated.")})}else e.showCal=!0},e.pay=function(){r.display("Updating purchase order...",!1),e.po.status="Paid";for(var t=0;e.po.items.length>t;t++)e.po.items[t].status="Paid";e.po.$update(function(){r.display("Purchase order updated.")})}}]),angular.module("employeeApp").controller("SupplyDetailsCtrl",["$scope","$routeParams","Notification","Supply",function(e,t,o,r){o.display("Retrieving supply...",!1),e.showQuantity=!1,e.supply=r.get({id:t.id},function(){o.hide()});var n=["m","yd","pc","pack","container","fabric"],i=["pc","pack","container"],a=["pack","pc"];e.showWidth=function(){return n.indexOf(e.supply.units)>-1||n.indexOf(e.supply.type)>-1||"kg"==e.supply.units&&"packaging"==e.supply.type?!0:!1},e.showDepth=function(){return i.indexOf(e.supply.units)>-1?!0:!1},e.showHeight=function(){return a.indexOf(e.supply.units)>-1||"kg"==e.supply.units&&"packaging"==e.supply.type?!0:!1},e.update=function(){o.display("Updating "+e.supply.description+"...",!1),e.supply.$update(function(){o.display(e.supply.description+" updated.")})},e.add=function(t){if(e.showQuantity=!1,!t)var t=e.quantity;e.supply.$add({quantity:t},function(){})},e.subtract=function(t){if(e.showQuantity=!1,!t)var t=e.quantity;e.supply.$subtract({quantity:t},function(){})},e.changeQuantity=function(t,o){if(!o)throw ValueError("Expecting a quantity");e[t]()},e.$on("$destroy",function(){e.update()})}]),angular.module("employeeApp").directive("imageUploader",["Notification","FileUploader",function(e,t){return{templateUrl:"views/templates/image-uploader.html",restrict:"EA",replace:!0,scope:{url:"@url",onUpload:"&"},link:function(e){e.selection="addImage",e.showUploadButton=!1,e.buttonOn=function(){e.showUploadButton=!0},e.buttonOff=function(){e.showUploadButton=!1},e.upload=function(o){var r=t.upload(o,e.url);r.then(function(t){console.log(t),e.onUpload({data:t})})}}}}]);